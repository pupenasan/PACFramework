<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<FBExchangeFile>
	<fileHeader company="Schneider Automation" product="Unity Pro XL V13.1 - 180823C" dateTime="date_and_time#2022-8-29-12:3:21" content="Function Block source file" DTDVersion="41"></fileHeader>
	<contentHeader name="Project" version="0.0.17" dateTime="date_and_time#2022-8-28-13:42:17"></contentHeader>
	<FBSource nameOfFBType="DRVFN" version="0.52" dateTime="dt#2022-08-29-11:56:40">
		<attribute name="TypeCodeCheckSumString" value="DFB3"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="D19E"></attribute>
		<inOutParameters>
			<variables name="ACTCFG" typeName="DRV_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="ACTHMI" typeName="DRV_HMI">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="LSTP" typeName="DIVAR_CFG">
				<comment>кнопка стоп по місцю</comment>
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
			<variables name="RUN" typeName="DIVAR_CFG">
				<comment>сигнал робота</comment>
				<attribute name="PositionPin" value="4"></attribute>
			</variables>
			<variables name="RDY" typeName="DIVAR_CFG">
				<comment>готовність пристрою до роботи</comment>
				<attribute name="PositionPin" value="5"></attribute>
			</variables>
			<variables name="ALM" typeName="DIVAR_CFG">
				<comment>помилка ПЧ</comment>
				<attribute name="PositionPin" value="6"></attribute>
			</variables>
			<variables name="RMT" typeName="DIVAR_CFG">
				<comment>перемикач в місцевий по місцю</comment>
				<attribute name="PositionPin" value="7"></attribute>
			</variables>
			<variables name="SPDC" typeName="DIVAR_CFG">
				<comment>контакт дискретного датчику контролю обертів</comment>
				<attribute name="PositionPin" value="13"></attribute>
			</variables>
			<variables name="CSTRT" typeName="DOVAR_CFG">
				<comment>команда запуску</comment>
				<attribute name="PositionPin" value="8"></attribute>
			</variables>
			<variables name="SPD" typeName="AIVAR_CFG">
				<comment>плинне значення швидкості</comment>
				<attribute name="PositionPin" value="9"></attribute>
			</variables>
			<variables name="CSPD" typeName="AOVAR_CFG">
				<comment>задане значення швидкості</comment>
				<attribute name="PositionPin" value="10"></attribute>
			</variables>
			<variables name="PLCCFG" typeName="PLC_CFG">
				<attribute name="PositionPin" value="11"></attribute>
			</variables>
			<variables name="ACTBUF" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="12"></attribute>
			</variables>
		</inOutParameters>
		<publicLocalVariables>
			<variables name="ACTBUFIN" typeName="ACTTR_CFG"></variables>
			<variables name="ACTBUFOUT" typeName="ACTTR_CFG"></variables>
		</publicLocalVariables>
		<privateLocalVariables>
			<variables name="ACTCFGu" typeName="ACTTR_CFG"></variables>
			<variables name="STA" typeName="ACTTR_STA"></variables>
			<variables name="ALMS" typeName="ACTTR_ALM"></variables>
			<variables name="CMD" typeName="ACTTR_CMD"></variables>
			<variables name="CMDINT" typeName="UINT"></variables>
			<variables name="SOPN1" typeName="BOOL"></variables>
			<variables name="SCLS1" typeName="BOOL"></variables>
			<variables name="SRUN1" typeName="BOOL"></variables>
			<variables name="SPWR1" typeName="BOOL"></variables>
			<variables name="SALM1" typeName="BOOL"></variables>
			<variables name="SPOS1" typeName="REAL"></variables>
			<variables name="dT1" typeName="UDINT"></variables>
			<variables name="dpos" typeName="REAL"></variables>
			<variables name="DRV_to_ACT" typeName="DRV_to_ACT"></variables>
			<variables name="ACT_PRE" typeName="ACT_PRE"></variables>
			<variables name="ACT_CMDCTRL" typeName="ACT_CMDCTRL"></variables>
			<variables name="ACT_POST" typeName="ACT_POST"></variables>
			<variables name="ACT_to_DRV" typeName="ACT_to_DRV"></variables>
		</privateLocalVariables>
		<FBProgram name="DRV">
			<STSource>DRV_to_ACT(DRVCFG:=ACTCFG,  DRVHMI:=ACTHMI, ACTCFG:=ACTCFGu);
(*попередня обробка: ініт STA, ALM, CMD, INBUF, SML, dt *)
ACT_PRE (ACTCFG := ACTCFGu, STA := STA, ALMs := ALMS, CMD := CMD, dt1 := dT1, PLCCFG := PLCCFG, ACTBUF := ACTBUF);
(*значення за замовченням*)
IF PLCCFG.STA_SCN1 THEN (*first scan*)
    IF ACTCFGu.T_OPNSP &lt;= 0 THEN (*якщо уставка часу выдкриття не виставлена*)
        ACTCFGu.T_OPNSP := 500; (*5 секунд*)
    END_IF;
    IF ACTCFGu.T_DEASP &lt;= 0 THEN (*якщо уставка затримки часу тривоги не виставлена*)
        ACTCFGu.T_DEASP := 200; (*2 секунди*)
    END_IF;
    (*технологічні тривоги для датчиків не використовуються*)
    IF RUN.ID &lt;&gt; 0 THEN
        RUN.PRM_ISALM := false; (*ISALM*)
        RUN.PRM_ISWRN := false; (*ISWRN*)
    END_IF;

END_IF;

(* --------------------- блок параметрів*)
(*параметри перевірка наявності/використання датчиків на вході*)
ACTCFGu.PRM.PRM_MANCFG     := false;(*у цьому проекті не буде ручного конфігурування параметрів IO*)
ACTCFGu.PRM.PRM_ALMENBL    := NOT ALM.PRM_DSBL AND ALM.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_ZWRKENBL   := NOT RUN.PRM_DSBL AND RUN.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_ZPOSENBL   := NOT SPD.PRM_DSBL AND SPD.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_PWRENBL    := NOT RDY.PRM_DSBL AND RDY.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_BTNSTPENBL := NOT LSTP.PRM_DSBL AND LSTP.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_ALMENBL    := NOT ALM.PRM_DSBL AND ALM.ID &lt;&gt; 0;
ACTCFGu.PRM.PRM_SELLCLENBL := NOT RMT.PRM_DSBL AND RMT.ID &lt;&gt; 0;

(*------------------- блок для режиму імітації*)
(*режим імітації підлеглих від хозяїна*)
LSTP.STA_SML := STA.STA_SML;
RUN.STA_SML := STA.STA_SML;
RDY.STA_SML := STA.STA_SML;
ALM.STA_SML := STA.STA_SML;
RMT.STA_SML := STA.STA_SML;
CSTRT.STA_SML := STA.STA_SML;
SPD.STA_SML := STA.STA_SML;
CSPD.STA_SML := STA.STA_SML;

(*логіка для режиму імітації  *)
IF STA.STA_SML THEN
    (*імітація датчиків *)
    IF NOT SPD.STA_FRC THEN SPD.VAL := CSPD.VAL; END_IF;
    IF NOT RUN.STA_FRC THEN RUN.STA_VALB:=ACTCFGu.STEP1=2 OR ACTCFGu.STEP1=4; END_IF;
    IF NOT RDY.STA_FRC THEN RDY.STA_VALB:=true; END_IF; (*живлення є*)
    IF NOT ALM.STA_FRC THEN ALM.STA_VALB := false; END_IF;(*тривоги немає*)
END_IF;

(*-------------------- блок обробки команд
//стандартний обробник команд*)
ACT_CMDCTRL (ACTCFG := ACTCFGu, STA := STA, CMD := CMD, ACTBUF := ACTBUF);

(*переключення в ручний режим при включенні локального ручного і блокування усіх команд*)
IF (RMT.STA_VALB AND NOT RMT.PRM_DSBL AND ACTCFGu.PRM.PRM_SELLCLENBL) OR STA.STA_MANBXOUT OR STA.STA_MANBX THEN
    (*CMD_RESET*)
    CMD.CMD_OPN:=FALSE;
    CMD.CMD_CLS:=FALSE;
    CMD.CMD_TOGGLE:=FALSE;
    CMD.CMD_ALMACK:=FALSE;
    CMD.CMD_ALMRESET:=FALSE;
    CMD.CMD_BLCK:=FALSE;
    CMD.CMD_DBLCK:=FALSE;
    CMD.CMD_STOPTUN:=FALSE;
    CMD.CMD_TUNING:=FALSE;
    CMD.CMD_MAN:=FALSE;
    CMD.CMD_AUTO:=FALSE;
    CMD.CMD_PROTECT:=FALSE;
    CMD.CMD_START:=FALSE;
    CMD.CMD_STOP:=FALSE;
    CMD.CMD_UP:=FALSE;
    CMD.CMD_DWN:=FALSE;
    CMD.CMD_CRMT:=FALSE;
   (* CMD.CMD_RESOLUTION:=FALSE;*)
    CMD.CMD_REVERS:=FALSE;
    CMD.CMD_CLCL:=FALSE;
    CMD.CMD_DBLCKACTTOGGLE:=FALSE;
    CMD.CMD_STARTDELAY:=FALSE;
    CMD.CMD_STOPDELAY:=FALSE;
    CMD.CMD_P_RESOLUTION:=FALSE;
    CMD.CMD_BUFLOAD:=FALSE;
   (* CMD.CMD_OUTSRVC:=FALSE;*)
   (* CMD.CMD_INSRVC:=FALSE;*)
    CMD.CMD_b27:=FALSE;
    CMD.CMD_b28:=FALSE;
    CMD.CMD_b29:=FALSE;
    CMD.CMD_b30:=FALSE;
    CMD.CMD_b31:=FALSE;
END_IF;

(* -------------------  блок обробки станів датчиків відкриття/закриття, або їх заміна на логіку*)
IF NOT ACTCFGu.PRM.PRM_ZWRKENBL THEN
    SRUN1:=ACTCFGu.STEP1=2 OR ACTCFGu.STEP1=4;
ELSE
    SRUN1:=RUN.STA_VALB;
END_IF;
IF NOT ACTCFGu.PRM.PRM_PWRENBL THEN
    SPWR1:=true;
ELSE
    SPWR1:=RDY.STA_VALB;
END_IF;
IF NOT ACTCFGu.PRM.PRM_ALMENBL THEN
    SALM1:=FALSE;
ELSE
    SALM1:=ALM.STA_VALB;
END_IF;
IF NOT ACTCFGu.PRM.PRM_ZPOSENBL THEN       (* ЯКЩО НЕМА СИГНАЛ ЗВОРОТНЬОГО ЗВЯЗКУ ПОЛОЖЕННЯ*)
    SPOS1:=CSPD.VAL;                     (* ТО ПОЛОЖЕННЯ ПРИРІВНЮЄМО ЗАДАНОМУ ЗНАЧЕННЮ*)
ELSE
    SPOS1:=SPD.VAL;                     (* ІНАКШЕ БЕРЕЗ ЗНАЧЕННЯ З ДАТЧИКА*)
END_IF;

(*----------------- автомат станів позиції та тривог позиції  *)

CASE ACTCFGu.STEP1 OF
    0:(*ініціалізація*)
        ACTCFGu.STEP1 := 1;
        ACTCFGu.T_STEP1 := 0;
    1, 4, 5: (*кінцеві стани, 1 - невизначений 4 - запущений, 5 - зупинений*)
        IF ((ACTCFGu.STEP1 = 4 AND NOT SRUN1) OR (ACTCFGu.STEP1 = 5 AND SRUN1)) AND NOT STA.STA_MANBX THEN
	    ALMS.ALM_ALMSHFT:=true;
        ELSE
            ALMS.ALM_ALMSHFT:=FALSE;
        END_IF;

        IF SRUN1 AND NOT ALMS.ALM_ALMSHFT THEN
            ACTCFGu.STEP1 := 4;
            CSTRT.STA_VALB:=true;
        END_IF;
        IF NOT SRUN1 AND NOT ALMS.ALM_ALMSHFT THEN
            ACTCFGu.STEP1 := 5;
            CSTRT.STA_VALB:=FALSE;
	    STA.STA_ISREVERS:=FALSE;
        END_IF;
       
    2:  (*запускається*)
        CSTRT.STA_VALB:=true;
        IF SRUN1 THEN
            ACTCFGu.STEP1 := 4; (*у стан запущено*)
            ACTCFGu.T_STEP1 := 0;
        END_IF;
        
        ALMS.ALM_ALMSTRT := FALSE;
        ALMS.ALM_ALMSTP := FALSE;
        
        IF ACTCFGu.T_STEP1 &gt;= (UINT_TO_UDINT(ACTCFGu.T_DEASP)*100) THEN
            ALMS.ALM_ALMSTRT := TRUE;
            ALMS.ALM_ALMSTP := FALSE;
            ACTCFGu.STEP1 := 6; (*у стан заблоковано*)
            ACTCFGu.T_STEP1 := 0;
        END_IF;
    3:  (*зупиняється*)
        CSTRT.STA_VALB:=FALSE;
        IF NOT SRUN1 THEN
	    STA.STA_ISREVERS:=FALSE;
            ACTCFGu.STEP1 := 5;
            ACTCFGu.T_STEP1 := 0;
        END_IF;
        
        ALMS.ALM_ALMCLS := false;
        ALMS.ALM_ALMOPN := FALSE;
          
        IF ACTCFGu.T_STEP1 &gt;= (UINT_TO_UDINT(ACTCFGu.T_DEASP)*100) THEN
            ALMS.ALM_ALMSTP := TRUE;
            ALMS.ALM_ALMSTRT := FALSE;
            ACTCFGu.STEP1 := 6; (*у стан заблоковано*)
            ACTCFGu.T_STEP1 := 0;
        END_IF;
    6: (*заблоковано*)
        CSTRT.STA_VALB:=FALSE;
	STA.STA_ISREVERS:=FALSE;
        IF CMD.CMD_DBLCK THEN
            ACTCFGu.STEP1 := 5; (*у стан зупинено*)
            ACTCFGu.T_STEP1 := 0;
            ALMS.ALM_ALMSTRT:=FALSE;
            ALMS.ALM_ALMSTP:=FALSE;
            ALMS.ALM_ALMINVRTR:=FALSE;
            ALMS.ALM_ALMPWR:=FALSE;
            ALMS.ALM_ALMSHFT:=FALSE;
        END_IF;
    ELSE  (*невизначеність*)
        ACTCFGu.STEP1 := 0;
END_CASE;

STA.STA_ISANALOG:=CSPD.ID&lt;&gt;0;
STA.STA_STOPING :=ACTCFGu.STEP1 = 3;
STA.STA_STRTING :=ACTCFGu.STEP1 = 2;
STA.STA_STOPED  :=ACTCFGu.STEP1 = 5 OR ACTCFGu.STEP1 = 6;
STA.STA_WRKED   :=ACTCFGu.STEP1 = 4;
STA.STA_BLCK    :=ACTCFGu.STEP1 = 6 and not STA.STA_MAINT;


(*----------------------------- керування ВМ*)
IF CMD.CMD_STOP THEN
    CSTRT.STA_VALB:=FALSE;
END_IF;
IF CMD.CMD_REVERS THEN
    CMD.CMD_START:= TRUE; 
    CMD.CMD_STOP:= false;
    STA.STA_ISREVERS:=TRUE;
END_IF;
(*керування start/stop тільки при дозволі керування або тимчасовому розблокуванні*)
IF (CMD.CMD_RESOLUTION OR PLCCFG.STA_PERM.6) AND NOT STA.STA_BLCK THEN
    IF CMD.CMD_START AND ACTCFGu.STEP1 &lt;&gt; 4 THEN
        ACTCFGu.STEP1 := 2;
        ACTCFGu.T_STEP1 := 0;
        ACTCFGu.CNTPER := ACTCFGu.CNTPER + 1;
    END_IF;
    IF CMD.CMD_STOP AND ACTCFGu.STEP1 &lt;&gt; 5 THEN
        ACTCFGu.STEP1 := 3;
        ACTCFGu.T_STEP1 := 0;
    END_IF;
ELSE
    CSTRT.STA_VALB:=FALSE;
END_IF;

IF CMD.CMD_BLCK THEN    (*при команді блокувати перевести в потрібний стан*)
        ACTCFGu.STEP1 := 6;
        ACTCFGu.T_STEP1 := 0;
END_IF;

IF CMD.CMD_OUTSRVC THEN (*при команді вивести з експлуатації перевести в потрібний стан заблоковано і виставляємо відповідний біт*)
        STA.STA_MAINT := true;
        ACTCFGu.STEP1 := 6;
        ACTCFGu.T_STEP1 := 0;
END_IF;

IF CMD.CMD_INSRVC THEN (*при команді ввести з експлуатації перевести в стан зупинено і зкидаємо відповідний біт*)
        STA.STA_MAINT := false;
        ACTCFGu.STEP1 := 5;
        ACTCFGu.T_STEP1 := 0;
END_IF;


(*-------------------- режими*)

STA.STA_FRC :=LSTP.STA_FRC AND LSTP.ID&lt;&gt;0
OR RUN.STA_FRC AND RUN.ID&lt;&gt;0
OR RDY.STA_FRC AND RDY.ID&lt;&gt;0
OR ALM.STA_FRC AND ALM.ID&lt;&gt;0
OR RMT.STA_FRC AND RMT.ID&lt;&gt;0
OR CSTRT.STA_FRC AND CSTRT.ID&lt;&gt;0
OR SPD.STA_FRC AND SPD.ID&lt;&gt;0
OR CSPD.STA_FRC AND CSPD.ID&lt;&gt;0;

IF STA.STA_MAINT THEN (*якщо виведено з експлуатації тривоги не відслідковуємо*)
	ALMS.ALM_ALMSTRT := FALSE;
	ALMS.ALM_ALMSTP := FALSE;
	ALMS.ALM_ALMINVRTR := FALSE;
	ALMS.ALM_ALMPWR := FALSE;
	ALMS.ALM_ALMSHFT := FALSE;
END_IF;

ALMS.ALM_ALMPWR:=NOT SPWR1;
ALMS.ALM_ALM := ALMS.ALM_ALMSTRT OR ALMS.ALM_ALMSTP OR ALMS.ALM_ALMINVRTR OR ALMS.ALM_ALMPWR OR ALMS.ALM_ALMSHFT;
IF ALMS.ALM_ALM AND NOT STA.STA_MANBX AND ACTCFGu.STEP1&lt;&gt;6 THEN
    ACTCFGu.STEP1 := 6;
    ACTCFGu.T_STEP1 := 0;
END_IF;

(*------------------- зведення ксатомних тривог, режимів, бітів*)
IF ALMs.ALM_ALMSTRT THEN
    PLCCFG.ALM_ALM := TRUE;
    ACTCFGu.CNTALM := ACTCFGu.CNTALM + 1;
    PLCCFG.CNTALM:= PLCCFG.CNTALM + 1;
    IF NOT ACTCFGu.ALM.ALM_ALMSTRT THEN
        PLCCFG.ALM_NWALM := TRUE;
    END_IF;
END_IF;

IF ALMS.ALM_ALMSTP THEN
    PLCCFG.ALM_ALM := TRUE;
    ACTCFGu.CNTALM := ACTCFGu.CNTALM + 1;
    PLCCFG.CNTALM:= PLCCFG.CNTALM + 1;
    IF NOT ACTCFGu.ALM.ALM_ALMSTP THEN
        PLCCFG.ALM_NWALM := TRUE;
    END_IF;
END_IF;
IF ALMS.ALM_ALMSHFT THEN
    PLCCFG.ALM_ALM := TRUE;
    ACTCFGu.CNTALM := ACTCFGu.CNTALM + 1;
    PLCCFG.CNTALM:= PLCCFG.CNTALM + 1;
    IF NOT ACTCFGu.ALM.ALM_ALMSHFT THEN
        PLCCFG.ALM_NWALM := TRUE;
    END_IF;
END_IF;
IF ALMS.ALM_ALMINVRTR THEN
    PLCCFG.ALM_ALM := TRUE;
    ACTCFGu.CNTALM := ACTCFGu.CNTALM + 1; 
    PLCCFG.CNTALM:= PLCCFG.CNTALM + 1;
    IF NOT ACTCFGu.ALM.ALM_ALMINVRTR THEN
        PLCCFG.ALM_NWALM := TRUE;
    END_IF;
END_IF;
IF ALMS.ALM_ALMPWR THEN
    PLCCFG.ALM_ALM := TRUE;
    ACTCFGu.CNTALM := ACTCFGu.CNTALM + 1;
    PLCCFG.CNTALM:= PLCCFG.CNTALM + 1;
    IF NOT ACTCFGu.ALM.ALM_ALMPWR THEN
        PLCCFG.ALM_NWALM := TRUE;
    END_IF;
END_IF;


IF ACTCFGu.STA.STA_WRKED THEN
    ACTCFGu.TQ_LAST:=ACTCFGu.T_STEP1/60000;
END_IF;

IF ACTCFGu.TQ_LAST&gt;=16#7FFFFFFF THEN
    ACTCFGu.TQ_LAST:=16#7FFFFFFF;
END_IF;

IF ACTCFGu.STA.STA_WRKED THEN
    IF PLCCFG.PLS_P60S THEN
        ACTCFGu.TQ_TOTAL:=ACTCFGu.TQ_TOTAL+1;
    END_IF;
END_IF;

IF ACTCFGu.TQ_TOTAL&gt;=16#7FFFFFFF THEN
    ACTCFGu.TQ_TOTAL:=16#7FFFFFFF;
END_IF;

ACTCFGu.POS := SPOS1;

(*заключна обробка: зведення в PLC.CFG, STA, ALM, CMD, INBUF, SML, dt *)
ACT_POST (ACTCFG := ACTCFGu, STA := STA, ALMs := ALMS, CMD := CMD, dt1 := dt1, ACTBUF := ACTBUF, PLCCFG := PLCCFG);

ACT_to_DRV(DRVCFG:=ACTCFG, DRVHMI:=ACTHMI, ACTCFG:=ACTCFGu); 

(*------------------- вибір джерела завдання*)
IF ACTCFGu.STA.STA_INBUF AND ACTCFGu.STA.STA_DISP THEN
    ACTCFGu.CPOS := ACTBUF.CPOS;
    ACTHMI.CSPD := ACTCFGu.CPOS;
    ACTCFG.CSPD := ACTCFGu.CPOS;
ELSIF NOT ACTCFGu.STA.STA_INBUF AND ACTCFGu.STA.STA_DISP THEN
    ACTCFGu.CPOS := ACTHMI.CSPD;
    ACTHMI.CSPD := ACTCFGu.CPOS;
    ACTCFG.CSPD := ACTCFGu.CPOS;
ELSE
    ACTCFGu.CPOS := ACTCFG.CSPD;
    ACTHMI.CSPD := ACTCFGu.CPOS;
    ACTCFG.CSPD := ACTCFGu.CPOS;
END_IF;
CSPD.VAL:=ACTCFGu.CPOS;

(*реалізація читання конфігураційних даних в буфер out*)
IF (uint_to_word(ACTCFG.CLSID) AND 16#FFF0)=(uint_to_word(ACTBUFIN.CLSID) AND 16#FFF0) AND ACTCFG.ID=ACTBUFIN.ID AND ACTBUFIN.CMDHMI = 16#100 then
   (* MSG 200-Ok 400-Error
   // 200 - Дані записані
   // 201 - Дані прочитані   *)
   ACTBUFOUT.MSG := 201;

   ACTBUFOUT.T_DEASP := ACTCFG.T_DEASP;

   ACTBUFIN.CMDHMI :=0; 
end_if;  

(*реалізація запису конфігураційних даних з буфер in в технологічну змінну*)
IF (uint_to_word(ACTCFG.CLSID) AND 16#FFF0)=(uint_to_word(ACTBUFIN.CLSID) AND 16#FFF0) AND ACTCFG.ID=ACTBUFIN.ID AND ACTBUFIN.CMDHMI = 16#101 then
   (* MSG 200-Ok 400-Error
   // 200 - Дані записані
   // 201 - Дані прочитані *)
   
   ACTBUFOUT:=ACTBUFIN;

   ACTCFG.T_DEASP := ACTBUFIN.T_DEASP;

   ACTBUFOUT.MSG := 201;

   ACTBUFIN.CMDHMI :=0; 
end_if;  
</STSource>
		</FBProgram>
	</FBSource>
	<DDTSource DDTName="DRV_CFG" version="0.04" dateTime="dt#2022-06-23-20:36:35">
		<attribute name="TypeSignatureCheckSumString" value="DBE8"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>ідентифікатор класу</comment>
			</variables>
			<variables name="STA" typeName="INT">
				<comment>біти стану</comment>
			</variables>
			<variables name="STA_b0" typeName="BOOL">
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_b1" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_MAINT" typeName="BOOL">
				<comment>=1 виведений з обслуговування</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_STOPING" typeName="BOOL">
				<comment>=1 Зупиняється</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_STRTING" typeName="BOOL">
				<comment>=1 Запускається</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_STOPED" typeName="BOOL">
				<comment>=1 Зупинений(16#0100)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_ISANALOG" typeName="BOOL">
				<comment>=1 з аналоговим керуванням (для зурнчості відображення)</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_ISREVERS" typeName="BOOL">
				<comment>=1 - пуск з реверсом</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_WRKED" typeName="BOOL">
				<comment>=1 В роботі</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_DISP" typeName="BOOL">
				<comment>=1 дистанційний режим (з ПК/ОП) (16#0200)</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_MANBX" typeName="BOOL">
				<comment>=1 Ручний зі щита (за зворотнім зв'язком)</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_INIOTBUF" typeName="BOOL">
				<comment>=1 - змінна в IOT буфері</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 - змінна в буфері</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 хоча би одна зі змінних в об’єкті форсована (для зручності відображення при наладці)</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 режим симуляції</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_BLCK" typeName="BOOL">
				<comment>=1 Заблокований</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="ALM" typeName="INT">
				<comment>біти тривог</comment>
			</variables>
			<variables name="ALM_ALMSTRT" typeName="BOOL">
				<comment>=1 Не включився (скидається при зміні команди або стану) датчика)</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="ALM_ALMSTP" typeName="BOOL">
				<comment>=1 Не відключився (скидається при зміні команди або стану) датчика)</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="ALM_ALMSHFT" typeName="BOOL">
				<comment>=1 Порушення стану</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="ALM_ALMINVRTR" typeName="BOOL">
				<comment>=1 помилка перетворювача частоти</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="ALM_ALMPWR" typeName="BOOL">
				<comment>=1 відсутнє живлення контактора</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="ALM_b5" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="ALM_ALM" typeName="BOOL">
				<comment>=1 Помилка приводу (по OR)</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="ALM_WRN" typeName="BOOL">
				<comment>=1 Попередження приводу (по OR)</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="ALM_ALMBELL" typeName="BOOL">
				<comment>=1 Команда включення дзвоника (на один цикл ПЛК)</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="ALM_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="ALM_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="ALM_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="ALM_b12" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="ALM_b13" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="ALM_b14" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="ALM_b15" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CMD" typeName="ACTTR_CMD">
				<comment>команда</comment>
			</variables>
			<variables name="PRM" typeName="ACTTR_PRM">
				<comment>біти параметрів</comment>
			</variables>
			<variables name="SPD" typeName="REAL">
				<comment>позиціяВМ (0-100%) - ЗВОРОТНІЙ ЗВЯЗОК</comment>
			</variables>
			<variables name="CSPD" typeName="REAL">
				<comment>позиціяВМ (0-100%) - ЗАДАНЕ ЗНАЧЕННЯ</comment>
			</variables>
			<variables name="T_DEASP" typeName="UINT">
				<comment>час затримки тривоги 0.1 с</comment>
			</variables>
			<variables name="STEP1" typeName="UINT">
				<comment>крок</comment>
			</variables>
			<variables name="CNTPER" typeName="UINT">
				<comment>кількість перестановок</comment>
			</variables>
			<variables name="CNTALM" typeName="UINT">
				<comment>кількість тривог</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
			<variables name="TQ_TOTAL" typeName="UDINT">
				<comment>Загальний час напрацювання в хв</comment>
			</variables>
			<variables name="TQ_LAST" typeName="UDINT">
				<comment>Час роботи з останнього пуску в с</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="ACTTR_CMD" version="0.03" dateTime="dt#2022-06-23-20:36:25">
		<attribute name="TypeSignatureCheckSumString" value="AD59"></attribute>
		<structure>
			<variables name="CMD1" typeName="INT"></variables>
			<variables name="CMD_OPN" typeName="BOOL">
				<comment>Відкрити 16#0001</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="CMD_CLS" typeName="BOOL">
				<comment>Закрити  16#0002</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="CMD_TOGGLE" typeName="BOOL">
				<comment>Переключити (відкрити&lt;-&gt;закрити, включити &lt;-&gt; відключити) 16#0003</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="CMD_ALMACK" typeName="BOOL">
				<comment>Підтвердити тривогу 16#0004</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="CMD_ALMRESET" typeName="BOOL">
				<comment>Скинути тривоги 16#0005</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="CMD_BLCK" typeName="BOOL">
				<comment>Заблокувати 16#0006</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="CMD_DBLCK" typeName="BOOL">
				<comment>Розблокувати 16#0007</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="CMD_STOPTUN" typeName="BOOL">
				<comment>Зупинити автоналаштування 16#0008</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="CMD_TUNING" typeName="BOOL">
				<comment>Запустити автоналаштування 16#0009</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="CMD_MAN" typeName="BOOL">
				<comment>Перевести в ручний з SCADA/HMI 16#0301</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="CMD_AUTO" typeName="BOOL">
				<comment>Перевести в автоматичний з SCADA/HMI 16#0302</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="CMD_PROTECT" typeName="BOOL">
				<comment>Включити алгоритм захисту 16#000A</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="CMD_START" typeName="BOOL">
				<comment>Запустити 16#0011</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="CMD_STOP" typeName="BOOL">
				<comment>Зупинити 16#0012</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="CMD_UP" typeName="BOOL">
				<comment>Більше 16#0021</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="CMD_DWN" typeName="BOOL">
				<comment>Менше 16#0022</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CMD2" typeName="INT"></variables>
			<variables name="CMD_CRMT" typeName="BOOL">
				<comment>Відключити локальне керування (по місцю) 16#0314</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="CMD_RESOLUTION" typeName="BOOL">
				<comment>=1 дозвіл на керування 16#000B</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="CMD_REVERS" typeName="BOOL">
				<comment>Включити реверс 16#0013</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="CMD_CLCL" typeName="BOOL">
				<comment>Включити локальне керування (по місцю) 16#0313</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="CMD_DBLCKACTTOGGLE" typeName="BOOL">
				<comment>Переключення дозволу на ігнорування CMRESOLUTION 16#000C</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="CMD_STARTDELAY" typeName="BOOL">
				<comment>запуск з затримкою (тільки автомат)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="CMD_STOPDELAY" typeName="BOOL">
				<comment>зупин з затримкою (тільки автомат)</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="CMD_P_RESOLUTION" typeName="BOOL">
				<comment>дозвіл по наявності тиску в системі</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="CMD_BUFLOAD" typeName="BOOL">
				<comment>завантажити в буфер</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="CMD_OUTSRVC" typeName="BOOL">
				<comment>вивести з експлуатації</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="CMD_INSRVC" typeName="BOOL">
				<comment>ввести в експлуатацію</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="CMD_b27" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="CMD_b28" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="CMD_b29" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="CMD_b30" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="CMD_b31" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="ACTTR_PRM" version="0.03" dateTime="dt#2022-01-17-11:17:16">
		<attribute name="TypeSignatureCheckSumString" value="0FE1"></attribute>
		<structure>
			<variables name="PRM1" typeName="INT"></variables>
			<variables name="PRM_b0" typeName="BOOL">
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_ZWRKENBL" typeName="BOOL">
				<comment>=1 є звонішній вхід - зворотній звязок про роботу</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_ZPOSENBL" typeName="BOOL">
				<comment>=1 є аналоговий зворотній звязок частоти/позиції</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_PWRENBL" typeName="BOOL">
				<comment>=1 є звонішній вхід по стану живлення</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_MANCFG" typeName="BOOL">
				<comment>=1 ручне керування налаштуванням</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_ZOPNENBL" typeName="BOOL">
				<comment>=1 є датчик відкритості</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_ZCLSENBL" typeName="BOOL">
				<comment>=1 є датчик закритості</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_AUTOACK" typeName="BOOL">
				<comment>=1, автоматичне підтвердження тривог</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_BTNSTPENBL" typeName="BOOL">
				<comment>=1 є зовнішній вхід - включена кнопка STOP</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_ALMENBL" typeName="BOOL">
				<comment>=1 є зовнішній вхід - сигнал аварії від приводу</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_SELLCLENBL" typeName="BOOL">
				<comment>=1 є зовнішній вхід - сигнал включення місцевого керування</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_PULSCTRLENBL" typeName="BOOL">
				<comment>=1 схема керування імпулсами (команди на 2с)</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_ZRUNENBL" typeName="BOOL">
				<comment>=1 є зовнішній вхід про рух приводу</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_ZSPDENBL" typeName="BOOL">
				<comment>=1 є зовнішній вхід про датчику швидкості приводу</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_CRVRSENBL" typeName="BOOL">
				<comment>=1 ВМ з виходом керування реверсом</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_BLCKOFSPD" typeName="BOOL">
				<comment>=1 зупиняти по зниженні швидкості</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="PRM2" typeName="INT"></variables>
			<variables name="PRM_NOPRES" typeName="BOOL">
				<comment>=1 довзолити рух без включеного маслонасоса</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_b17" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_b18" typeName="BOOL">
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_b19" typeName="BOOL">
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_b20" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_b21" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_b22" typeName="BOOL">
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_b23" typeName="BOOL">
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_b24" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_b25" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_b26" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_b27" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_b28" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_b29" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_b30" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_b31" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="DRV_HMI" version="0.02" dateTime="dt#2022-03-18-16:34:43">
		<attribute name="TypeSignatureCheckSumString" value="BDF4"></attribute>
		<structure>
			<variables name="STA" typeName="INT">
				<comment>біти стану</comment>
			</variables>
			<variables name="CMD" typeName="INT">
				<comment>команда керування</comment>
			</variables>
			<variables name="ALM" typeName="INT">
				<comment>біти тривог</comment>
			</variables>
			<variables name="SPD" typeName="INT">
				<comment>позиція ВМ (0-10000) - ЗВОРОТНІЙ ЗВЯЗОК</comment>
			</variables>
			<variables name="CSPD" typeName="REAL">
				<comment>позиція ВМ (0-100%) - ЗАДАНЕ ЗНАЧЕННЯ</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="DIVAR_CFG" version="0.06" dateTime="dt#2022-07-16-10:24:43">
		<attribute name="TypeSignatureCheckSumString" value="87BE"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>Унікальний ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>16#1010</comment>
			</variables>
			<variables name="STA" typeName="INT">
				<comment>статус (див STC)</comment>
			</variables>
			<variables name="STA_VRAW" typeName="BOOL">
				<comment>=1 – значення дискретного сигналу з DICH</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_VALB" typeName="BOOL">
				<comment>=1 – значення дискретної вхідної змінної після всіх перетворень, в режимі FRC=1 може змінюватися із-зовні</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_BAD" typeName="BOOL">
				<comment>=1 - Дані недостовірні {A.BAD.2}</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_ALDIS" typeName="BOOL">
				<comment>=1 - Тривога виведена з експлуатації {A.MSG.3}</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_DLNK" typeName="BOOL">
				<comment>=1 – якщо прив’язаний до каналу</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_ENBL" typeName="BOOL">
				<comment>=1 – змінна задіяна  = (NOT PRM.7 AND  DLNK)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_ALM" typeName="BOOL">
				<comment>=1 - Тривога {A.ALM.6}</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_VALPRV" typeName="BOOL">
				<comment>значення на попередньому циклі</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_ISALM" typeName="BOOL">
				<comment>=1 - задіяна тривога </comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_SPDMONON" typeName="BOOL">
				<comment>=1 - включений контроль швидкості (SPDMON) </comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_ISWRN" typeName="BOOL">
				<comment>=1 - задіяне попередження</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_WRN" typeName="BOOL">
				<comment>=1 - Попередження {A.ALM.11}</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 – змінна в буфері</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 - Режим форсування{A.MSG.13}</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 – змінна в режимі симуляції</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_CMDLOAD" typeName="BOOL">
				<comment>=1 – команда завантаження в буфер</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="VALI" typeName="INT">
				<comment>для відображення значення при не форсуванні, використовується для введення значення з буфера при форсуванні</comment>
			</variables>
			<variables name="PRM" typeName="INT">
				<comment>параметри</comment>
			</variables>
			<variables name="PRM_ISALM" typeName="BOOL">
				<comment>=1 – задіяти як технологічну тривогу</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_ISWRN" typeName="BOOL">
				<comment>=1 – задіяти як технологічне попередження</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_INVERSE" typeName="BOOL">
				<comment>=1 – інвертувати сире значення</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_b3" typeName="BOOL">
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_b4" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_NRMVAL" typeName="BOOL">
				<comment>значення норми</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_QALENBL" typeName="BOOL">
				<comment>=1 – задіяти тривогу недостовірності каналу</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_DSBL" typeName="BOOL">
				<comment>=1 – змінна не задіяна</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_SPEEDENBL" typeName="BOOL">
				<comment>=1 – активація блоку розрахунку швидкості</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_b12" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_b13" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_STATICMAP" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_b15" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CHID" typeName="UINT">
				<comment>Логічний номер дискретного каналу</comment>
			</variables>
			<variables name="STEP1" typeName="UINT">
				<comment>номер кроку</comment>
			</variables>
			<variables name="T_DEASP" typeName="UINT">
				<comment>Час затримки тривоги в 0.1 секундах</comment>
			</variables>
			<variables name="T_FLTSP" typeName="UINT">
				<comment>Заданий час фільтрації в мілісекундах</comment>
			</variables>
			<variables name="CHIDDF" typeName="UINT">
				<comment>Логічний номер дискретного каналу за замовченням</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="DOVAR_CFG" version="0.04" dateTime="dt#2022-03-21-18:21:18">
		<attribute name="TypeSignatureCheckSumString" value="8EAF"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>Унікальний ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>16#1010</comment>
			</variables>
			<variables name="STA" typeName="INT">
				<comment>статус (див STC)</comment>
			</variables>
			<variables name="STA_VRAW" typeName="BOOL">
				<comment>=1 – значення дискретного сигналу з DOCH</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_VALB" typeName="BOOL">
				<comment>=1 – значення дискретної вихідної змінної після всіх перетворень, в режимі FRC=1 може змінюватися із-зовні</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_BAD" typeName="BOOL">
				<comment>=1 – Дані недостовірні {A.BAD.2}</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_ALDIS" typeName="BOOL">
				<comment>=1 - Тривога виведена з експлуатації {A.MSG.3}</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_DLNK" typeName="BOOL">
				<comment>=1 – якщо прив’язаний до каналу</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_ENBL" typeName="BOOL">
				<comment>=1 – змінна задіяна = (NOT PRM.7 AND DLNK)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_b6" typeName="BOOL">
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_VALPRV" typeName="BOOL">
				<comment>значення на попередньому циклі</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_b8" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_MVAL" typeName="BOOL">
				<comment>=1 – ручне (форсоване) значення</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 – змінна в буфері</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 - Режим форсування{A.MSG.13}</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 – змінна в режимі симуляції</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_CMDLOAD" typeName="BOOL">
				<comment>=1 – команда завантаження в буфер</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="VALI" typeName="INT">
				<comment>для відображення значення при не форсуванні, використовується для введення значення з буфера при форсуванні</comment>
			</variables>
			<variables name="PRM" typeName="INT">
				<comment>параметри</comment>
			</variables>
			<variables name="PRM_b0" typeName="BOOL">
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_b1" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_INVERSE" typeName="BOOL">
				<comment>=1 – інвертувати сире значення</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_b3" typeName="BOOL">
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_b4" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_b5" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_QALENBL" typeName="BOOL">
				<comment>=1 – задіяти тривогу недостовірності каналу</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_DSBL" typeName="BOOL">
				<comment>=1 – змінна не задіяна</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_b8" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_b12" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_b13" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_STATICMAP" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_b15" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CHID" typeName="UINT">
				<comment>Логічний номер дискретного каналу</comment>
			</variables>
			<variables name="CHIDDF" typeName="UINT">
				<comment>Логічний номер дискретного каналу за замовченням</comment>
			</variables>
			<variables name="STEP1" typeName="UINT">
				<comment>номер кроку</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="AIVAR_CFG" version="0.03" dateTime="dt#2022-03-21-18:21:26">
		<attribute name="TypeSignatureCheckSumString" value="320D"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>Унікальний ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>16#1030</comment>
			</variables>
			<variables name="STA" typeName="INT">
				<comment>статус (див STC)</comment>
			</variables>
			<variables name="STA_BRK" typeName="BOOL">
				<comment>=1 – Обрив каналу {A.BAD.0}</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_OVRLD" typeName="BOOL">
				<comment>=1 – КЗ або перевантаження каналу {A.BAD.1}</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_BAD" typeName="BOOL">
				<comment>=1 – Дані недостовірні {A.BAD.2}</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_ALDIS" typeName="BOOL">
				<comment>=1 – Тривога виведена з експлуатації {A.MSG.3}</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_DLNK" typeName="BOOL">
				<comment>=1 – якщо прив’язаний до каналу</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_ENBL" typeName="BOOL">
				<comment>=1 – змінна задіяна = (NOT PRM.7 AND DLNK)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_ALM" typeName="BOOL">
				<comment>=1 – активна технологічна тривога і не активна BAD</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_LOLO" typeName="BOOL">
				<comment>=1 – Критично низьке значення {A.ALM.7}</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_LO" typeName="BOOL">
				<comment>=1 – Низьке значення {A.WRN.8}</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_HI" typeName="BOOL">
				<comment>=1 – Високе значення {A.WRN.9}</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_HIHI" typeName="BOOL">
				<comment>=1 – Критично високе значення {A.ALM.10}</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_WRN" typeName="BOOL">
				<comment>=1 – активне технологічне попередження і не активні BAD та ALM</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 – змінна в буфері</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 – Режим форсування{A.MSG.13}</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 – змінна в режимі симуляції</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_CMDLOAD" typeName="BOOL">
				<comment>=1 – команда завантаження в буфер</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="VALPRCSTA2" typeName="INT">
				<comment>значення у % від шкали вимірювання (0-10000)</comment>
			</variables>
			<variables name="PRM" typeName="INT">
				<comment>параметри</comment>
			</variables>
			<variables name="PRM_LOENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога LO /MASK 16#1</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_HIENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога HI /MASK 16#2</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_LOLOENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога LOLO /MASK 16#4</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_HIHIENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога HIHI/MASK 16#8</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_BRKENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога обриву</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_OVRLENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога перевантаження</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_QALENBL" typeName="BOOL">
				<comment>=1 – задіяна тривога перевірки якості даних</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_DSBL" typeName="BOOL">
				<comment>=1 – змінна не задіяна</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_PWLENBL" typeName="BOOL">
				<comment>=1 – задіяна кусочно-лінійна інтерполяція (не використовувати разом з TOTALON)</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_TOTALON" typeName="BOOL">
				<comment>=1 – задіяне інтегрування (не використовувати разом з PWLENBL)</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_SQRT" typeName="BOOL">
				<comment>=1 - задіяне квадратичне (квадратний корінь) масштабування</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_PARAISPROC" typeName="BOOL">
				<comment>=1 - параметри налаштування (гістерезис, нечутл) задається в процентах</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_AFRZENBL" typeName="BOOL">
				<comment>=1 - активна тривога нечутливості контролю зависання</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_ASPDENBL" typeName="BOOL">
				<comment>=1 - активна тривога допуску контролю швидкості</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_STATICMAP" typeName="BOOL">
				<comment>=1 - статична привязка каналів</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_NORAW" typeName="BOOL">
				<comment>=1 - джерело даних змінюється ззовні, відсутність масштабування (для мережних і внутрішніх змінних)</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CHID" typeName="UINT">
				<comment>Логічний номер дискретного каналу</comment>
			</variables>
			<variables name="LORAW" typeName="INT">
				<comment>Сире (немасштабоване) значення мінімуму</comment>
			</variables>
			<variables name="HIRAW" typeName="INT">
				<comment>Сире (немасштабоване) значення максимуму</comment>
			</variables>
			<variables name="VAL" typeName="REAL">
				<comment>масштабоване значення</comment>
			</variables>
			<variables name="VALFRC" typeName="REAL">
				<comment>зберігає форсоване значення</comment>
			</variables>
			<variables name="LOENG" typeName="REAL">
				<comment>Інженерне (масштабоване) значення мінімуму</comment>
			</variables>
			<variables name="HIENG" typeName="REAL">
				<comment>Інженерне (масштабоване) значення максимуму</comment>
			</variables>
			<variables name="LOSP" typeName="REAL">
				<comment>Уставка тривоги HI</comment>
			</variables>
			<variables name="HISP" typeName="REAL">
				<comment>Уставка тривоги LO</comment>
			</variables>
			<variables name="LOLOSP" typeName="REAL">
				<comment>Уставка тривоги LOLO</comment>
			</variables>
			<variables name="HIHISP" typeName="REAL">
				<comment>Уставка тривоги HIHI</comment>
			</variables>
			<variables name="THSP" typeName="REAL">
				<comment>Технологічна уставка HI (для регулятора)</comment>
			</variables>
			<variables name="TLSP" typeName="REAL">
				<comment>Технологічна уставка LO (для регулятора)</comment>
			</variables>
			<variables name="T_FLT" typeName="UINT">
				<comment>час фільтрації в мілісекундах (фільтр - аперіодична ланка)</comment>
			</variables>
			<variables name="VRAW" typeName="INT">
				<comment>сире значення</comment>
			</variables>
			<variables name="STA2" typeName="INT">
				<comment>додаткові біти статусу та тривоги</comment>
			</variables>
			<variables name="STA2_ASPD" typeName="BOOL">
				<comment>Шивдка зміна сигналу {A.BAD.0}</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA2_AFRZ" typeName="BOOL">
				<comment>Сигнал не змінюється {A.BAD.1}</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA2_AOVRFL" typeName="BOOL">
				<comment>Перехід через верхнє значення {A.BAD.2}</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA2_AUNDRFL" typeName="BOOL">
				<comment>Перехід через нижнє значення  {A.BAD.3}</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA2_b4" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA2_b5" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA2_b6" typeName="BOOL">
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA2_b7" typeName="BOOL">
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA2_b8" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA2_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA2_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA2_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA2_b12" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA2_b13" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA2_b14" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA2_b15" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="tmp" typeName="INT"></variables>
			<variables name="HYST" typeName="REAL">
				<comment>гістерезис в реальних одиницях або % (PRM_PARAISPROC)</comment>
			</variables>
			<variables name="T_DEALL" typeName="UINT">
				<comment>Час затримки на виникнення тривоги LL в 0.1 секундах</comment>
			</variables>
			<variables name="T_DEAL" typeName="UINT">
				<comment>Час затримки на виникнення тривоги L в 0.1 секундах (за необхідністю)</comment>
			</variables>
			<variables name="T_DEAH" typeName="UINT">
				<comment>Час затримки на виникнення тривоги H в 0.1 секундах (за необхідністю)</comment>
			</variables>
			<variables name="T_DEAHH" typeName="UINT">
				<comment>Час затримки на виникнення тривоги HH в 0.1 секундах (за необхідністю)</comment>
			</variables>
			<variables name="STEP1" typeName="UINT">
				<comment>номер кроку</comment>
			</variables>
			<variables name="CHIDDF" typeName="UINT">
				<comment>Логічний номер каналу за замовченням</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
			<variables name="VALPRV" typeName="REAL">
				<comment>значення на попередньому циклі (для реалізації фільтрації)</comment>
			</variables>
			<variables name="VALPRV_AFRZ" typeName="REAL">
				<comment>значення на попередньому перерахунку контролю зависання (Енікон)</comment>
			</variables>
			<variables name="VALPRV_ASPD" typeName="REAL">
				<comment>значення на попередньому перерахунку контролю скачку (Енікон)</comment>
			</variables>
			<variables name="DEASP_AFRZ" typeName="REAL">
				<comment>уставка нечутливості контролю зависання (Енікон)</comment>
			</variables>
			<variables name="DOPSP_ASPD" typeName="REAL">
				<comment>уставка допуску контролю швидкості (Енікон)</comment>
			</variables>
			<variables name="ZERO_CUT_VAL" typeName="REAL">
				<comment>відсічка нуля </comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="AOVAR_CFG" version="0.03" dateTime="dt#2022-03-21-19:38:02">
		<attribute name="TypeSignatureCheckSumString" value="482E"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>Унікальний ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>16#1040</comment>
			</variables>
			<variables name="STA" typeName="INT">
				<comment>статус (див STC)</comment>
			</variables>
			<variables name="STA_b0" typeName="BOOL">
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_b1" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_BAD" typeName="BOOL">
				<comment>=1 – Дані недостовірні {A.BAD.2}</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_ALDIS" typeName="BOOL">
				<comment>=1 – Тривога виведена з експлуатації {A.MSG.3}</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_DLNK" typeName="BOOL">
				<comment>=1 – якщо прив’язаний до каналу</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_ENBL" typeName="BOOL">
				<comment>=1 – змінна задіяна</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_b6" typeName="BOOL">
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_b7" typeName="BOOL">
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_b8" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 – змінна в буфері</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 – Режим форсування{A.MSG.13}</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 – змінна в режимі симуляції</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_CMDLOAD" typeName="BOOL">
				<comment>=1 – команда завантаження в буфер</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="VRAW" typeName="INT">
				<comment>сирі значення</comment>
			</variables>
			<variables name="VAL" typeName="REAL">
				<comment>масштабоване значення</comment>
			</variables>
			<variables name="VALFRC" typeName="REAL">
				<comment>зберігає форсоване значення</comment>
			</variables>
			<variables name="VALPRV" typeName="REAL">
				<comment>зберігає попереднє значення</comment>
			</variables>
			<variables name="PRM" typeName="INT">
				<comment>параметри</comment>
			</variables>
			<variables name="PRM_b0" typeName="BOOL">
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PRM_b1" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PRM_b2" typeName="BOOL">
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PRM_b3" typeName="BOOL">
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PRM_b4" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PRM_b5" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PRM_QALENBL" typeName="BOOL">
				<comment>=1 – задіяти тривогу недостовірності каналу</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PRM_DSBL" typeName="BOOL">
				<comment>=1 – змінна не задіяна</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PRM_PWLENBL" typeName="BOOL">
				<comment>=1 – задіяна кусочно-лінійна інтерполяція (не використовувати разом з TOTALON)</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PRM_b9" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PRM_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PRM_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PRM_b12" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PRM_b13" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PRM_STATICMAP" typeName="BOOL">
				<comment>=1 -  статична привязка каналів</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PRM_NORAW" typeName="BOOL">
				<comment>=1 - джерело даних змінюється ззовні</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CHID" typeName="UINT">
				<comment>Логічний номер вихідного аналогового каналу CH</comment>
			</variables>
			<variables name="LORAW" typeName="INT">
				<comment>Сире (немасштабоване) значення мінімуму</comment>
			</variables>
			<variables name="HIRAW" typeName="INT">
				<comment>Сире (немасштабоване) значення максимуму</comment>
			</variables>
			<variables name="LOENG" typeName="REAL">
				<comment>Інженерне (масштабоване) значення мінімуму</comment>
			</variables>
			<variables name="HIENG" typeName="REAL">
				<comment>Інженерне (масштабоване) значення максимуму</comment>
			</variables>
			<variables name="MVAL" typeName="REAL">
				<comment>ручне(форсоване) значення</comment>
			</variables>
			<variables name="T_FLT" typeName="UINT">
				<comment>час фільтрації в мілісекундах (фільтр - аперіодична ланка)</comment>
			</variables>
			<variables name="VALPROC" typeName="INT">
				<comment>значення у відсотках</comment>
			</variables>
			<variables name="STEP1" typeName="UINT">
				<comment>номер кроку</comment>
			</variables>
			<variables name="CHIDDF" typeName="UINT">
				<comment>Логічний номер дискретного каналу за замовченням</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="PLC_CFG" version="0.12" dateTime="dt#2022-07-25-11:17:57">
		<attribute name="TypeSignatureCheckSumString" value="1691"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>Унікальний ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>16#21xx</comment>
			</variables>
			<variables name="STA" typeName="UINT"></variables>
			<variables name="STA_CON2ERR" typeName="BOOL">
				<comment>є помилка звязку з сусідні ПЛК в парі (для теплого резерування)</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_PLC2STOP" typeName="BOOL">
				<comment>спарений ПЛК в стопі (для теплого резерування)</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_BLK" typeName="BOOL">
				<comment>є хоча б один заблокований ВМ</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_ALDIS" typeName="BOOL">
				<comment>є хоча б одна відключена тривога</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_DIOON" typeName="BOOL">
				<comment>йде опитування по мережі (MODBUS або аналогічній) засобів віддаленого вводу/виводу</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_DIOERR" typeName="BOOL">
				<comment>є помилка на DIO</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_DBLCKALL" typeName="BOOL">
				<comment>усі приводи розблоковані</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>хоча б одна змінна форсована на будь якому рівні</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_SMLALL" typeName="BOOL">
				<comment>все в режимі в імітації, примушує усі CM перейти в режим імітації</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_DISP" typeName="BOOL">
				<comment>хоча б один елемент в режимі ручного управління</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_FRC2" typeName="BOOL">
				<comment>є хоча б один форсований керівний елемент (рівня 2), клапан, двигун</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_FRC1" typeName="BOOL">
				<comment>хоча б одна змінна форсована (рівня 1)</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_SCN1" typeName="BOOL">
				<comment>перший скан</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_FRC0" typeName="BOOL">
				<comment>хоча б одна змінна форсована (рівня 0)</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment> хоча б один об’єкт в режимі імітації</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_CMDACK" typeName="BOOL">
				<comment>підтвердження команди, команда пройшла через весь цикл задачі і отримана усіма</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="CMD" typeName="UINT">
				<comment>Команди з HMI</comment>
			</variables>
			<variables name="CMDPRG" typeName="UINT">
				<comment>Команди з програмного керування (побітові)</comment>
			</variables>
			<variables name="PRM1" typeName="UINT">
				<comment>дискретні параметри</comment>
			</variables>
			<variables name="PRM2" typeName="UINT">
				<comment>дискретні параметри</comment>
			</variables>
			<variables name="PLS" typeName="UINT">
				<comment>бітові міандри та імпульси по часу</comment>
			</variables>
			<variables name="PLS_P100MS" typeName="BOOL">
				<comment>100 мс</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="PLS_P200MS" typeName="BOOL">
				<comment>200 мс</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="PLS_P500MS" typeName="BOOL">
				<comment>500 мс</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="PLS_P1S" typeName="BOOL">
				<comment>1 с</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="PLS_P2S" typeName="BOOL">
				<comment>2 с</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="PLS_P5S" typeName="BOOL">
				<comment>5 с</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="PLS_P10S" typeName="BOOL">
				<comment>10 с</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="PLS_P60S" typeName="BOOL">
				<comment>1 хв</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="PLS_M1S" typeName="BOOL">
				<comment>меандр з періодом 1 с (0.5 с + 0.5 с)</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="PLS_M2S" typeName="BOOL">
				<comment>меандр з періодом 2 с (1 с + 1 с)</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="PLS_b10" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="PLS_b11" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="PLS_NEWMIN" typeName="BOOL">
				<comment>=1 на один цикл основної задачі – початок хвилини</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="PLS_NEWHR" typeName="BOOL">
				<comment>=1 на один цикл основної задачі – початок години</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="PLS_NEWDAY" typeName="BOOL">
				<comment>=1 на один цикл основної задачі – початок доби</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="PLS_NEWSHIFT" typeName="BOOL">
				<comment>=1 на один цикл основної задачі – початок зміни</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="ALM1" typeName="UINT"></variables>
			<variables name="ALM_ALM" typeName="BOOL">
				<comment>активна технологічна тривога</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="ALM_NWALM" typeName="BOOL">
				<comment>зявилась нова технологічна тривога</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="ALM_ALMNACK" typeName="BOOL">
				<comment>квітування технологічної тривоги</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="ALM_WRN" typeName="BOOL">
				<comment>активне технологічне попередження</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="ALM_NWWRN" typeName="BOOL">
				<comment>зявилось нове технологічне попередження</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="ALM_WRNNACK" typeName="BOOL">
				<comment>квітування технологічного попередження</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="ALM_BAD" typeName="BOOL">
				<comment>активна тривога недостовірності даних</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="ALM_NWBAD" typeName="BOOL">
				<comment>нова тривога недостовірності даних</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="ALM_BADNACK" typeName="BOOL">
				<comment>квітування тривоги недостовірності даних</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="ALM_EMCYSTP" typeName="BOOL">
				<comment>швидкий зупин</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="ALM_STP2RUN" typeName="BOOL">
				<comment>є перехід з стану стоп в стан ран</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="ALM_CON2ERR" typeName="BOOL">
				<comment>є помилка звязку з сусідні ПЛК в парі (для теплого резерування)</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="ALM_PLC2STOP" typeName="BOOL">
				<comment>спарений ПЛК в стопі (для теплого резерування)</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="ALM_DIOERR" typeName="BOOL">
				<comment>є помилка на DIO </comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="ALM_PLCERR" typeName="BOOL">
				<comment>є апаратна помилка (ПЛК)</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="ALM_CONHIERR" typeName="BOOL">
				<comment>є помилка звязку з верхнім рівнем</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="ALM2" typeName="INT">
				<comment>біти алармів</comment>
			</variables>
			<variables name="STEP1" typeName="INT">
				<comment>крок основної програми</comment>
			</variables>
			<variables name="T_STEP1" typeName="INT">
				<comment>час кроку основної програми обробки, в (с)</comment>
			</variables>
			<variables name="MSG" typeName="UDINT">
				<comment>час кроку основної програми обробки, в (с)</comment>
			</variables>
			<variables name="TQ" typeName="UDINT">
				<comment>загальний час з початку 1-го циклу контролера (в секундах)</comment>
			</variables>
			<variables name="TQM" typeName="UDINT">
				<comment>загальний час роботи ПЛК з моменту пуску (в хвилинах)</comment>
			</variables>
			<variables name="DICNT" typeName="INT">
				<comment>кількість наявних каналів DI</comment>
			</variables>
			<variables name="DOCNT" typeName="INT">
				<comment>кількість наявних каналів DO</comment>
			</variables>
			<variables name="AICNT" typeName="INT">
				<comment>кількість наявних каналів AI</comment>
			</variables>
			<variables name="AOCNT" typeName="INT">
				<comment>кількість наявних каналів AO</comment>
			</variables>
			<variables name="NOW" typeName="ARRAY[0..3] OF INT">
				<comment>плинний час астрономічний час в BCD форматі</comment>
				<instanceElementDesc name="[1]">
					<comment>hour  minute (16#hhmm)</comment>
				</instanceElementDesc>
				<instanceElementDesc name="[0]">
					<comment>seconds,-- (16#ss,--)</comment>
				</instanceElementDesc>
				<instanceElementDesc name="[2]">
					<comment>month, day (16#mmdd)</comment>
				</instanceElementDesc>
				<instanceElementDesc name="[3]">
					<comment>year (16#yyyy)</comment>
				</instanceElementDesc>
			</variables>
			<variables name="SHIFTPARA" typeName="ARRAY[0..3] OF INT">
				<comment>Години передачі змін (максимум 3 зміни): SHIFT[0] – кількість змін SHIFT[1] – передача 1-ї зміни (BCD 16#hhmm) SHIFT[2] – передача 2-ї зміни (BCD 16#hhmm)  SHIFT[3] – передача 3-ї зміни (BCD 16#hhmm)</comment>
			</variables>
			<variables name="SHIFTNMB" typeName="UINT">
				<comment>номер активної зміни</comment>
			</variables>
			<variables name="CNTALM" typeName="UINT">
				<comment>лічильник кількості активних тривог "аварія"</comment>
			</variables>
			<variables name="CNTWRN" typeName="UINT">
				<comment>лічильник кількостіактивних тривог "попередження"</comment>
			</variables>
			<variables name="CNTBAD" typeName="UINT">
				<comment>лічильник кількостіактивних тривог "недостовірність"</comment>
			</variables>
			<variables name="CNTFRC" typeName="UINT">
				<comment>лічильник кількостіфорсованих об'єктів</comment>
			</variables>
			<variables name="CNTMAN" typeName="UINT">
				<comment>лічильник кількості ВМ в ручному режимі</comment>
			</variables>
			<variables name="TSK_LTIME" typeName="UINT">
				<comment>плинний (останній) час задачі в мілісекундах</comment>
			</variables>
			<variables name="TSK_MAXTIME" typeName="UINT">
				<comment>максимальний час задачі в мілісекундах</comment>
			</variables>
			<variables name="STA_PERM" typeName="INT">
				<comment>повторює STA, який був на початку виклику функції</comment>
			</variables>
			<variables name="ALM1_PERM" typeName="INT">
				<comment>повторює ALM1, який був на початку виклику функції</comment>
			</variables>
			<variables name="CNTALM_PERM" typeName="UINT">
				<comment>лічильник кількості активних тривог "аварія"</comment>
			</variables>
			<variables name="CNTWRN_PERM" typeName="UINT">
				<comment>лічильник кількостіактивних тривог "попередження"</comment>
			</variables>
			<variables name="CNTBAD_PERM" typeName="UINT">
				<comment>лічильник кількостіактивних тривог "недостовірність"</comment>
			</variables>
			<variables name="CNTFRC_PERM" typeName="UINT">
				<comment>лічильник кількостіфорсованих об'єктів</comment>
			</variables>
			<variables name="CNTMAN_PERM" typeName="UINT">
				<comment>лічильник кількості ВМ в ручному режимі</comment>
			</variables>
			<variables name="MODULSCNT" typeName="INT">
				<comment>кількість модулів</comment>
			</variables>
			<variables name="NOWns" typeName="UDINT">
				<comment>нс (наносекунди) для плинного астрономічного часу</comment>
			</variables>
			<variables name="TQMS" typeName="UDINT">
				<comment>мілісекундний лічильник, скидається при старті або після переповнення</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="ACTTR_CFG" version="0.09" dateTime="dt#2022-06-25-18:40:57">
		<attribute name="TypeSignatureCheckSumString" value="BA86"></attribute>
		<structure>
			<variables name="ID" typeName="UINT">
				<comment>ідентифікатор</comment>
			</variables>
			<variables name="CLSID" typeName="UINT">
				<comment>ідентифікатор класу</comment>
			</variables>
			<variables name="STA" typeName="ACTTR_STA">
				<comment>біти стану</comment>
			</variables>
			<variables name="ALM" typeName="ACTTR_ALM">
				<comment>біти тривог</comment>
			</variables>
			<variables name="CMD" typeName="ACTTR_CMD">
				<comment>біти команд</comment>
			</variables>
			<variables name="PRM" typeName="ACTTR_PRM">
				<comment>біти параметрыв</comment>
			</variables>
			<variables name="STAHMI1" typeName="INT">
				<comment>біти стану для НМІ</comment>
			</variables>
			<variables name="STAHMI2" typeName="INT">
				<comment>біти стану для НМІ</comment>
			</variables>
			<variables name="ALMHMI1" typeName="INT">
				<comment>біти тривог для НМІ</comment>
			</variables>
			<variables name="ALMHMI2" typeName="INT">
				<comment>біти тривог для НМІ</comment>
			</variables>
			<variables name="CMDHMI" typeName="INT">
				<comment>команди НМІ</comment>
			</variables>
			<variables name="PRMHMI" typeName="INT">
				<comment>параметри НМІ</comment>
			</variables>
			<variables name="T_DEASP" typeName="UINT">
				<comment>час затримки тривоги 0.1 с</comment>
			</variables>
			<variables name="T_OPNSP" typeName="UINT">
				<comment>Максимальний час відкриття в 0.1 секундах</comment>
			</variables>
			<variables name="POS" typeName="REAL">
				<comment>позиціяВМ (0-100%) - ЗВОРОТНІЙ ЗВЯЗОК</comment>
			</variables>
			<variables name="rez" typeName="INT"></variables>
			<variables name="STEP1" typeName="UINT">
				<comment>крок</comment>
			</variables>
			<variables name="CNTPER" typeName="UINT">
				<comment>кількість перестановок</comment>
			</variables>
			<variables name="CNTALM" typeName="UINT">
				<comment>кількість тривог</comment>
			</variables>
			<variables name="T_STEP1" typeName="UDINT">
				<comment>Плинний час кроку в мс</comment>
			</variables>
			<variables name="T_PREV" typeName="UDINT">
				<comment>час в мс з попереднього виклику, береться зі структури PLC_CFG.TQMS</comment>
			</variables>
			<variables name="VALPREV" typeName="REAL">
				<comment>значення на попередньому циклі</comment>
			</variables>
			<variables name="MVAL" typeName="REAL">
				<comment>значення в ручному режимі</comment>
			</variables>
			<variables name="POWER_IN" typeName="REAL">
				<comment>потужність, кВт</comment>
			</variables>
			<variables name="CPOS" typeName="REAL">
				<comment>позиціяВМ (0-100%) - ЗАДАНЕ ЗНАЧЕННЯ</comment>
			</variables>
			<variables name="SPD" typeName="INT">
				<comment>Обрахунок швидкості обертання ДАТЧЧИК 1, %</comment>
			</variables>
			<variables name="SPD2" typeName="INT">
				<comment>Обрахунок швидкості обертання ДАТЧЧИК 2, %</comment>
			</variables>
			<variables name="SPDWRNSP" typeName="UINT">
				<comment>вставка попередження на пробуксовку привода, %</comment>
			</variables>
			<variables name="SPDALMSP" typeName="UINT">
				<comment>вставка тривоги на пробуксовку привода, %</comment>
			</variables>
			<variables name="STRT_DELAY" typeName="UINT">
				<comment>ЗАТРИМКА НА ВКЛЮЧЕННЯ 0.1 С</comment>
			</variables>
			<variables name="STOP_DELAY" typeName="UINT">
				<comment>ЗАТРИМКА НА ВИКЛЮЧЕННЯ 0.1 С</comment>
			</variables>
			<variables name="TQ_TOTAL" typeName="UDINT">
				<comment>Загальний час напрацювання в хв</comment>
			</variables>
			<variables name="TQ_LAST" typeName="UDINT">
				<comment>Час роботи з останнього пуску в с</comment>
			</variables>
			<variables name="FRQ_IN" typeName="REAL">
				<comment>поточна частота</comment>
			</variables>
			<variables name="FRQ_OUT" typeName="REAL">
				<comment>задана частота</comment>
			</variables>
			<variables name="CURR_IN" typeName="REAL">
				<comment>струм зворотній звязок</comment>
			</variables>
			<variables name="SPDMON_DELAY" typeName="UINT">
				<comment>затримка на початок обрахунку швидкості 0.1 с</comment>
			</variables>
			<variables name="MSG" typeName="UINT">
				<comment>повідомлення</comment>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="ACTTR_STA" version="0.03" dateTime="dt#2022-06-23-18:57:05">
		<attribute name="TypeSignatureCheckSumString" value="B220"></attribute>
		<structure>
			<variables name="STA1" typeName="INT"></variables>
			<variables name="STA_IMSTPD" typeName="BOOL">
				<comment>=1 зупинився в проміжному стані</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_MANRUNING" typeName="BOOL">
				<comment>=1 рухається в невизначеному напрямку (ручний зі щита)</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_STOPING" typeName="BOOL">
				<comment>=1 Зупиняється</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_OPNING" typeName="BOOL">
				<comment>=1 Відкривається</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_CLSING" typeName="BOOL">
				<comment>=1 Закривається</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_OPND" typeName="BOOL">
				<comment>=1 Відкритий (16#0080)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_CLSD" typeName="BOOL">
				<comment>=1 Закритий (16#0100)</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_MANBXOUT" typeName="BOOL">
				<comment>=1 Включення ручного зі щита</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_WRKED" typeName="BOOL">
				<comment>=1 В роботі</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_DISP" typeName="BOOL">
				<comment>=1 дистанційний режим (з ПК/ОП) (16#0200)</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_MANBX" typeName="BOOL">
				<comment>=1 Ручний зі щита (за зворотнім зв'язком)</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_INBUF" typeName="BOOL">
				<comment>=1 - змінна в буфері</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_FRC" typeName="BOOL">
				<comment>=1 хоча би одна зі змінних в об’єкті форсована (для зручності відображення при наладці)</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_SML" typeName="BOOL">
				<comment>=1 режим симуляції</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_BLCK" typeName="BOOL">
				<comment>=1 Заблокований</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_STRTING" typeName="BOOL">
				<comment>=1 Запускається</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="STA2" typeName="INT"></variables>
			<variables name="STA_STOPED" typeName="BOOL">
				<comment>=1 Зупинений(16#0100)</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="STA_SLNDBRK" typeName="BOOL">
				<comment>=1 Помилка датчику</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="STA_CMDACK" typeName="BOOL">
				<comment>=1 підтвердження команди</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="STA_SPD1" typeName="BOOL">
				<comment>= 1 Робота, 1-ша швидкість</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="STA_SPD2" typeName="BOOL">
				<comment>= 1 Робота, 2-га швидкість</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="STA_WRNSPD2" typeName="BOOL">
				<comment>= 1 попередження на пробуксовку привода 2, %</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="STA_STRT_DELAY" typeName="BOOL">
				<comment>=1 - йде затримка перед запуском</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="STA_STOP_DELAY" typeName="BOOL">
				<comment>=1 - йде затримка перед зупинкою</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="STA_DBLCKACT" typeName="BOOL">
				<comment>=1 - режим ігнорування CMDRESOLUTION</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="STA_ISREVERS" typeName="BOOL">
				<comment>=1 - пуск з реверсом</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="STA_ISANALOG" typeName="BOOL">
				<comment>=1 з аналоговим керуванням (для зрeчності відображення)</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="STA_INIOTBUF" typeName="BOOL">
				<comment>=1 змінна в буфері IoT</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="STA_SPDMONON" typeName="BOOL">
				<comment>=1 включений контроль швидкості (SPDMON) </comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="STA_SPDCALIBRON" typeName="BOOL">
				<comment>=1 включене калібрування по швидкості</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="STA_MAINT" typeName="BOOL">
				<comment>=1 виведений з обслуговування</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="STA_b31" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
		</structure>
	</DDTSource>
	<DDTSource DDTName="ACTTR_ALM" version="0.04" dateTime="dt#2022-03-18-16:03:11">
		<attribute name="TypeSignatureCheckSumString" value="0D1F"></attribute>
		<structure>
			<variables name="ALM1" typeName="INT"></variables>
			<variables name="ALM_ALMSTRT" typeName="BOOL">
				<comment>=1 Не включився (скидається при зміні команди або стану) датчика)</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="ALM_ALMSTP" typeName="BOOL">
				<comment>=1 Не відключився (скидається при зміні команди або стану) датчика)</comment>
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="ALM_ALMOPN" typeName="BOOL">
				<comment>=1 Не відкрився (Несправність схеми управління)</comment>
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="ALM_ALMCLS" typeName="BOOL">
				<comment>=1 Не закрився (Несправність схеми управління)</comment>
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="ALM_ALMOPN2" typeName="BOOL">
				<comment>=1 Не відкрився</comment>
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="ALM_ALMCLS2" typeName="BOOL">
				<comment>=1 Не закрився (Несправність обладнання по місцю)</comment>
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="ALM_ALMSHFT" typeName="BOOL">
				<comment>=1 Порушення стану</comment>
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="ALM_ALM" typeName="BOOL">
				<comment>=1 Помилка приводу (по OR)</comment>
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="ALM_ALMBELL" typeName="BOOL">
				<comment>=1 Команда включення дзвоника (на один цикл ПЛК)</comment>
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="ALM_WRN" typeName="BOOL">
				<comment>=1 Попередження приводу (по OR)</comment>
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="ALM_WRNSPD" typeName="BOOL">
				<comment>= 1 попередження на пробуксовку привода, %</comment>
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="ALM_ALMSPD" typeName="BOOL">
				<comment>= 1 аварія на пробуксовку привода, %</comment>
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="ALM_WRNSPD2" typeName="BOOL">
				<comment>= 1 попередження на пробуксовку привода 2, %</comment>
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="ALM_ALMSPD2" typeName="BOOL">
				<comment>= 1 тривога на пробуксовку привода 2, %</comment>
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="ALM_ALMPWR" typeName="BOOL">
				<comment>= 1 - немає живлення</comment>
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="ALM_ALMSTPBTN" typeName="BOOL">
				<comment>= 1 - натиснута кнопка стоп</comment>
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
			<variables name="ALM2" typeName="INT"></variables>
			<variables name="ALM_ALMINVRTR" typeName="BOOL">
				<comment>= 1 - помилка частотного перетворювача</comment>
				<attribute name="ExtractBit" value="0"></attribute>
			</variables>
			<variables name="ALM_b17" typeName="BOOL">
				<attribute name="ExtractBit" value="1"></attribute>
			</variables>
			<variables name="ALM_b18" typeName="BOOL">
				<attribute name="ExtractBit" value="2"></attribute>
			</variables>
			<variables name="ALM_b19" typeName="BOOL">
				<attribute name="ExtractBit" value="3"></attribute>
			</variables>
			<variables name="ALM_b20" typeName="BOOL">
				<attribute name="ExtractBit" value="4"></attribute>
			</variables>
			<variables name="ALM_b21" typeName="BOOL">
				<attribute name="ExtractBit" value="5"></attribute>
			</variables>
			<variables name="ALM_b22" typeName="BOOL">
				<attribute name="ExtractBit" value="6"></attribute>
			</variables>
			<variables name="ALM_b23" typeName="BOOL">
				<attribute name="ExtractBit" value="7"></attribute>
			</variables>
			<variables name="ALM_b24" typeName="BOOL">
				<attribute name="ExtractBit" value="8"></attribute>
			</variables>
			<variables name="ALM_b25" typeName="BOOL">
				<attribute name="ExtractBit" value="9"></attribute>
			</variables>
			<variables name="ALM_b26" typeName="BOOL">
				<attribute name="ExtractBit" value="10"></attribute>
			</variables>
			<variables name="ALM_b27" typeName="BOOL">
				<attribute name="ExtractBit" value="11"></attribute>
			</variables>
			<variables name="ALM_b28" typeName="BOOL">
				<attribute name="ExtractBit" value="12"></attribute>
			</variables>
			<variables name="ALM_b29" typeName="BOOL">
				<attribute name="ExtractBit" value="13"></attribute>
			</variables>
			<variables name="ALM_b30" typeName="BOOL">
				<attribute name="ExtractBit" value="14"></attribute>
			</variables>
			<variables name="ALM_b31" typeName="BOOL">
				<attribute name="ExtractBit" value="15"></attribute>
			</variables>
		</structure>
	</DDTSource>
	<FBSource nameOfFBType="DRV_to_ACT" version="0.05" dateTime="dt#2022-07-16-10:19:13">
		<attribute name="TypeCodeCheckSumString" value="89EC"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="0EDF"></attribute>
		<inOutParameters>
			<variables name="DRVCFG" typeName="DRV_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="DRVHMI" typeName="DRV_HMI">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="ACTCFG" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
		</inOutParameters>
		<FBProgram name="DRV_to_ACT">
			<STSource>ACTCFG.ID:=      DRVCFG.ID;
ACTCFG.CLSID:=   DRVCFG.CLSID;
ACTCFG.CMD:=     DRVCFG.CMD;
ACTCFG.PRM:=     DRVCFG.PRM;
ACTCFG.T_DEASP:= DRVCFG.T_DEASP;
ACTCFG.POS:=  DRVCFG.SPD;
ACTCFG.CPOS:=  DRVCFG.CSPD;
ACTCFG.STEP1:=   DRVCFG.STEP1;
ACTCFG.CNTPER:=  DRVCFG.CNTPER;
ACTCFG.CNTALM:=  DRVCFG.CNTALM;
ACTCFG.T_STEP1:= DRVCFG.T_STEP1;
ACTCFG.T_PREV:=  DRVCFG.T_PREV;
ACTCFG.TQ_TOTAL:=DRVCFG.TQ_TOTAL;
ACTCFG.TQ_LAST:= DRVCFG.TQ_LAST;


ACTCFG.STA.STA_MAINT :=   DRVCFG.STA_MAINT;
ACTCFG.STA.STA_STOPING:=  DRVCFG.STA_STOPING;
ACTCFG.STA.STA_STRTING:=  DRVCFG.STA_STRTING;
ACTCFG.STA.STA_STOPED:=   DRVCFG.STA_STOPED;
ACTCFG.STA.STA_ISANALOG:= DRVCFG.STA_ISANALOG;
ACTCFG.STA.STA_ISREVERS:= DRVCFG.STA_ISREVERS;
ACTCFG.STA.STA_WRKED:=    DRVCFG.STA_WRKED;
ACTCFG.STA.STA_DISP:=     DRVCFG.STA_DISP;
ACTCFG.STA.STA_MANBX:=    DRVCFG.STA_MANBX;
ACTCFG.STA.STA_INIOTBUF:= DRVCFG.STA_INIOTBUF;
ACTCFG.STA.STA_INBUF:=    DRVCFG.STA_INBUF;
ACTCFG.STA.STA_FRC:=      DRVCFG.STA_FRC;
ACTCFG.STA.STA_SML:=      DRVCFG.STA_SML;
ACTCFG.STA.STA_BLCK:=     DRVCFG.STA_BLCK;

ACTCFG.ALM.ALM_ALMSTRT:=  DRVCFG.ALM_ALMSTRT;
ACTCFG.ALM.ALM_ALMSTP :=  DRVCFG.ALM_ALMSTP;
ACTCFG.ALM.ALM_ALMSHFT:=  DRVCFG.ALM_ALMSHFT;
ACTCFG.ALM.ALM_ALMBELL:=  DRVCFG.ALM_ALMINVRTR;
ACTCFG.ALM.ALM_ALMPWR :=  DRVCFG.ALM_ALMPWR;
ACTCFG.ALM.ALM_ALM    :=  DRVCFG.ALM_ALM;
ACTCFG.ALM.ALM_WRN    :=  DRVCFG.ALM_WRN;
ACTCFG.ALM.ALM_ALMBELL:=  DRVCFG.ALM_ALMBELL;

ACTCFG.CMDHMI:=DRVHMI.CMD;


</STSource>
		</FBProgram>
	</FBSource>
	<FBSource nameOfFBType="ACT_PRE" version="0.12" dateTime="dt#2022-07-26-10:44:22">
		<attribute name="TypeCodeCheckSumString" value="5DAC"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="58F3"></attribute>
		<inOutParameters>
			<variables name="ACTCFG" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="STA" typeName="ACTTR_STA">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="ALMs" typeName="ACTTR_ALM">
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
			<variables name="CMD" typeName="ACTTR_CMD">
				<attribute name="PositionPin" value="4"></attribute>
			</variables>
			<variables name="dt1" typeName="UDINT">
				<attribute name="PositionPin" value="5"></attribute>
			</variables>
			<variables name="PLCCFG" typeName="PLC_CFG">
				<attribute name="PositionPin" value="6"></attribute>
			</variables>
			<variables name="ACTBUF" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="7"></attribute>
			</variables>
		</inOutParameters>
		<FBProgram name="ACT_PRE">
			<STSource>(*  PACFramework SEControlExpertLIB V1.0.0 *)
(*початкова обробка для усіх ВМ: інціалізація, присвоєння у внутрішні STA, ALM; визначення INBUF, SML, #dt *)
(*first scan*)
IF PLCCFG.STA_SCN1 THEN 
    (*обнулення бітів структури STA*)
    ACTCFG.STA.STA_IMSTPD:=FALSE;
    ACTCFG.STA.STA_MANRUNING:=FALSE;
    ACTCFG.STA.STA_STOPING:=FALSE;
    ACTCFG.STA.STA_OPNING:=FALSE;
    ACTCFG.STA.STA_CLSING:=FALSE;
    ACTCFG.STA.STA_OPND:=FALSE;
    ACTCFG.STA.STA_CLSD:=FALSE;
    ACTCFG.STA.STA_MANBXOUT:=FALSE;
    ACTCFG.STA.STA_WRKED:=FALSE;
    ACTCFG.STA.STA_DISP:=FALSE;
    ACTCFG.STA.STA_MANBX:=FALSE;
    ACTCFG.STA.STA_INBUF:=FALSE;
    ACTCFG.STA.STA_FRC:=FALSE;
    ACTCFG.STA.STA_SML:=FALSE;
    ACTCFG.STA.STA_BLCK:=FALSE;
    ACTCFG.STA.STA_STRTING:=FALSE;
    ACTCFG.STA.STA_STOPED:=FALSE;
    ACTCFG.STA.STA_SLNDBRK:=FALSE;
    ACTCFG.STA.STA_CMDACK:=FALSE;
    ACTCFG.STA.STA_SPD1:=FALSE;
    ACTCFG.STA.STA_SPD2:=FALSE;
    ACTCFG.STA.STA_WRNSPD2:=FALSE;
    ACTCFG.STA.STA_STRT_DELAY:=FALSE;
    ACTCFG.STA.STA_STOP_DELAY:=FALSE;
    ACTCFG.STA.STA_DBLCKACT:=FALSE;
    ACTCFG.STA.STA_ISREVERS:=FALSE;
    ACTCFG.STA.STA_ISANALOG:=FALSE;
    ACTCFG.STA.STA_INIOTBUF:=FALSE;
    ACTCFG.STA.STA_SPDMONON:=FALSE;
    ACTCFG.STA.STA_SPDCALIBRON:=FALSE;
    ACTCFG.STA.STA_MAINT:=FALSE;
    ACTCFG.STA.STA_b31:=FALSE;
    (*обнулення бітів структури ALM*)
    ACTCFG.ALM.ALM_ALMSTRT:=FALSE;
    ACTCFG.ALM.ALM_ALMSTP:=FALSE;
    ACTCFG.ALM.ALM_ALMOPN:=FALSE;
    ACTCFG.ALM.ALM_ALMCLS:=FALSE;
    ACTCFG.ALM.ALM_ALMOPN2:=FALSE;
    ACTCFG.ALM.ALM_ALMCLS2:=FALSE;
    ACTCFG.ALM.ALM_ALMSHFT:=FALSE;
    ACTCFG.ALM.ALM_ALM:=FALSE;
    ACTCFG.ALM.ALM_ALMBELL:=FALSE;
    ACTCFG.ALM.ALM_WRN:=FALSE;
    ACTCFG.ALM.ALM_WRNSPD:=FALSE;
    ACTCFG.ALM.ALM_ALMSPD:=FALSE;
    ACTCFG.ALM.ALM_WRNSPD2:=FALSE;
    ACTCFG.ALM.ALM_ALMSPD2:=FALSE;
    ACTCFG.ALM.ALM_ALMPWR:=FALSE;
    ACTCFG.ALM.ALM_ALMSTPBTN:=FALSE;
    ACTCFG.ALM.ALM_ALMINVRTR:=FALSE;
    ACTCFG.ALM.ALM_b17:=FALSE;
    ACTCFG.ALM.ALM_b18:=FALSE;
    ACTCFG.ALM.ALM_b19:=FALSE;
    ACTCFG.ALM.ALM_b20:=FALSE;
    ACTCFG.ALM.ALM_b21:=FALSE;
    ACTCFG.ALM.ALM_b22:=FALSE;
    ACTCFG.ALM.ALM_b23:=FALSE;
    ACTCFG.ALM.ALM_b24:=FALSE;
    ACTCFG.ALM.ALM_b25:=FALSE;
    ACTCFG.ALM.ALM_b26:=FALSE;
    ACTCFG.ALM.ALM_b27:=FALSE;
    ACTCFG.ALM.ALM_b28:=FALSE;
    ACTCFG.ALM.ALM_b29:=FALSE;
    ACTCFG.ALM.ALM_b30:=FALSE;
    ACTCFG.ALM.ALM_b31:=FALSE;
    IF ACTCFG.T_OPNSP = 0 THEN ACTCFG.T_OPNSP:=50; END_IF;  
END_IF;
(*//читання інформації з контурів, якщо вони привязані
"RW_LOOP_SEL"(direct:='r', ACT:=#ACTCFG);*)

STA:=ACTCFG.STA;
ALMs := ACTCFG.ALM;
CMD := ACTCFG.CMD;
ALMs.ALM_ALMBELL:= false; (*дзвінок знімається через один цикл*)
STA.STA_INBUF := (ACTCFG.ID = ACTBUF.ID AND ACTBUF.ID &lt;&gt; 0 AND ACTCFG.CLSID = ACTBUF.CLSID);(*знаходиться в буфері конфігурування*)
STA.STA_SML := PLCCFG.STA_SMLALL;(*режим імітації*)
dt1 := PLCCFG.TQMS - ACTCFG.T_PREV; (*різниця між викликами в мс*)
IF dt1&lt;1 THEN dt1:=1; END_IF;


</STSource>
		</FBProgram>
	</FBSource>
	<FBSource nameOfFBType="ACT_CMDCTRL" version="0.16" dateTime="dt#2022-07-16-19:36:14">
		<attribute name="TypeCodeCheckSumString" value="F1C4"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="B4F1"></attribute>
		<inOutParameters>
			<variables name="ACTCFG" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="STA" typeName="ACTTR_STA">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="CMD" typeName="ACTTR_CMD">
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
			<variables name="ACTBUF" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="4"></attribute>
			</variables>
		</inOutParameters>
		<privateLocalVariables>
			<variables name="CMDINT" typeName="INT"></variables>
		</privateLocalVariables>
		<FBProgram name="ACT_CMDCTRL">
			<STSource>(*  PACFramework SEControlExpertLIB V1.0.0*)
(*блок обробляє команди з HMI та IOT, формує на основі них CMD, змінює статусні біти стану, обнуляє автоматичні команди в ручному режимі *)
(*вибір джерела конфігураційної/керівної команди HMI згідно пріоритету якщо команди надійшли одночасно*)
IF ACTCFG.CMDHMI &gt; 16#80 THEN (*конфіг кмд з HMI*)
    CMDINT := ACTCFG.CMDHMI;
ELSIF STA.STA_INBUF AND ACTBUF.CMDHMI &gt; 16#80 THEN (*конфіг кмд з буферу*)
    CMDINT := ACTBUF.CMDHMI;
ELSIF ACTCFG.CMDHMI &lt; 16#80 AND ACTCFG.CMDHMI &gt; 0 AND STA.STA_DISP THEN(*керування клапаном з елементу в ручному режимі*)
    CMDINT := ACTCFG.CMDHMI;
ELSIF STA.STA_INBUF AND ACTBUF.CMDHMI &lt; 16#80 AND ACTBUF.CMDHMI &gt; 0 AND STA.STA_DISP THEN (* керування клапаном з буферу в ручному режимі*)
    CMDINT := ACTBUF.CMDHMI; (* команда звідти інакше ігнорити*)
ELSE
    CMDINT := 0;
END_IF;
(*
(*---------------------- команди з IoT буферу, для керування тільки в ручному режимі  
//16#2xxx - команди для ВМ
#INIoTBUF:= ("IOTDB".IOTBUF.ACT.ID = #ACTCFG.ID);
#STA.INIOTBUF := #INIoTBUF;
IF ("IOTDB".IOTBUF.CMD AND 16#F000) = 16#2000 AND ("IOTDB".IOTBUF.ID = #ACTCFG.ID) THEN
    "IOTDB".IOTBUF.ACTH_ID := #ACTCFG.ID; //для запису в BUF
    IF #STA.DISP THEN 
        CASE "IOTDB".IOTBUF.CMD OF
            16#2001: //відкрити
                #CMDINT:=16#1;
            16#2002: //закрити
                #CMDINT:=16#2;
            16#2003: //перемкнути
                #CMDINT:=16#3;
        END_CASE;
    END_IF;
    CASE "IOTDB".IOTBUF.CMD OF
        16#2011: //завантажити буфер
            "IOTDB".IOTBUF.ACT := #ACTCFG;
        16#2012: //запис з буферу в змінну
            ;//
        16#2031: //переведення в ручний
            #CMDINT:=16#0301;
        16#2032: //переведення в автомат
            #CMDINT:=16#0302;
        16#2033: //тогл режиму
            #CMDINT:=16#0303;
    END_CASE;

    "IOTDB".IOTBUF.CMD:=0; "IOTDB".IOTBUF.ID:=0;
END_IF;
// #INIoTBUF Тепер в "ACT" POST 
//------------
*)

(*у рчуному режимі усі автоматичні команди керування обнуляються*)
IF STA.STA_DISP THEN
    CMD.CMD_OPN:=FALSE;
    CMD.CMD_CLS:=FALSE;
    CMD.CMD_TOGGLE:=false;
    CMD.CMD_START:=false;
    CMD.CMD_STOP:=false;
    CMD.CMD_REVERS:=false;
    CMD.CMD_TOGGLE:=FALSE;
END_IF;

(*команди операторського керування
16#0001 - CMD_OPN
16#0002 - CMD_CLS
16#0004 - CMD_ALMRST
16#0008 - CMD_DBLK
16#0010 - CMD_STOP
*)

(* команди HMI*)
CASE CMDINT OF
    16#0001:(*відкрити *)
        CMD.CMD_OPN := TRUE;
        CMD.CMD_CLS := FALSE;
    16#0002:(*закрити *)
        CMD.CMD_CLS := TRUE;
        CMD.CMD_OPN := FALSE;
    16#0003:(*перемкнути*)
        CMD.CMD_TOGGLE := TRUE;
    16#0004:(* Підтвердити тривогу*)
        CMD.CMD_ALMACK:= TRUE; 
    16#0005:(*Скинути тривоги *)
        CMD.CMD_ALMRESET:= TRUE; 
    16#0006:
        CMD.CMD_BLCK:= TRUE; (*Заблокувати*)
    16#0007:
        CMD.CMD_DBLCK:= TRUE; (*Розблокувати*)
    16#0008:
        CMD.CMD_STOPTUN:= TRUE;(*Зупинити автоналаштування*)
    16#0009:
        CMD.CMD_TUNING:= TRUE;(*Запустити автоналаштування *)
    16#000A:
        CMD.CMD_PROTECT:= TRUE;(*Включити алгоритм захисту *)
    16#000B: (*=1 дозвіл на керування*)
        CMD.CMD_RESOLUTION:= TRUE; (*//на один цикл*)
    16#000C: (*=1 запуск калібрування датчика шивдкості*)
        CMD.CMD_P_RESOLUTION := TRUE; (*//на один цикл*)  
    16#000D: (*=1 запуск калібрування датчика шивдкості*)
        CMD.CMD_DBLCKACTTOGGLE := true;
        STA.STA_DBLCKACT := NOT STA.STA_DBLCKACT;
     
    (*E..10 - вільні*)

    16#0011:(*Запустити*)
        CMD.CMD_START:= TRUE; 
        CMD.CMD_STOP:= false;
    16#0012: (*Зупинити*)
        CMD.CMD_STOP:= TRUE;
        CMD.CMD_START:= false;
    16#0013:(*19*)
        CMD.CMD_REVERS:= TRUE;(*Включити реверс *)
    (*14-20 - вільні*)
    16#0021:
        CMD.CMD_UP:= TRUE; (*Більше*)
    16#0022: 
        CMD.CMD_DWN:= TRUE; (*Менше*)
    (*23-9F - вільні*)
    (*починаючи з 16#0080 тільки для роботи з буфера і керування режимом*)
    16#0100: (*прочитати конфігурацію*)
        CMD.CMD_BUFLOAD:=true;
        ACTBUF := ACTCFG;
    16#0101: (*записати конфігурацію*)
        ACTCFG.PRM := ACTBUF.PRM;
	ACTCFG.T_DEASP := ACTBUF.T_DEASP;
        ACTCFG.T_OPNSP := ACTBUF.T_OPNSP;
        ACTCFG.STOP_DELAY := ACTBUF.STOP_DELAY;
        (*запис конфігураційних параметрів в контур, якщо він є*)
        (*"RW_LOOP_SEL"(direct:='c', ACT:=#ACTCFG);*)
    (*102-2FF вільні*)
    16#0300: (*перемкнути ручний/автомат*)
        STA.STA_DISP := NOT STA.STA_DISP;
    16#0301: (*РУЧНИЙ РЕЖИМ*)
        STA.STA_DISP := TRUE;
    16#0302: (*АВТО РЕЖИМ*)
        STA.STA_DISP := FALSE;
    16#0313:(* включити місцевий режим*)
        STA.STA_MANBXOUT := true;
	STA.STA_MANBX := true;
	STA.STA_DISP := TRUE;
        (*#CMD.CRMT:= TRUE; //чи потрібен з програми?*)
    16#0314:(* відключити місцевий режим*)
        STA.STA_MANBXOUT := false;
        STA.STA_MANBX := false;
        (*#CMD.CLCL:= TRUE; //чи потрібен з програми?*)
    16#0315: (*=1 вивести з експлуатації*)
        CMD.CMD_OUTSRVC := true;
    16#0316: (*=1 ввести в експлуатацію*)
        CMD.CMD_INSRVC := true;
    (*керування статистикою*)
    16#0401:(* скинути лічильник тривог 1025*)
        ACTCFG.CNTALM:=0;
    16#0402:(* скинути лічильник спрацювань/переміщень 1026*)
        ACTCFG.CNTPER:=0;
    16#0403:(* скинути лічильник спрацювань/переміщень 1027*)
        ACTCFG.TQ_TOTAL:=0;
    16#0404:(* скинути лічильник спрацювань/переміщень 1028*)
        ACTCFG.TQ_LAST :=0;
END_CASE;

(*проходження команд розблокувати-заблокувати з буфера та НМІ*)
IF ACTCFG.CMDHMI = 16#0006 OR (ACTBUF.CMDHMI = 16#0006 AND STA.STA_INBUF) THEN CMD.CMD_BLCK:= TRUE; END_IF;
IF ACTCFG.CMDHMI = 16#0007 OR (ACTBUF.CMDHMI = 16#0007 AND STA.STA_INBUF) THEN CMD.CMD_DBLCK:= TRUE; END_IF;

CMDINT:=0;
ACTCFG.CMDHMI:=0;
if STA.STA_INBUF then
  ACTBUF.CMDHMI:=0;
end_if;
</STSource>
		</FBProgram>
	</FBSource>
	<FBSource nameOfFBType="ACT_POST" version="0.19" dateTime="dt#2022-07-26-10:44:22">
		<attribute name="TypeCodeCheckSumString" value="746B"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="7336"></attribute>
		<inOutParameters>
			<variables name="ACTCFG" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="STA" typeName="ACTTR_STA">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="ALMs" typeName="ACTTR_ALM">
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
			<variables name="CMD" typeName="ACTTR_CMD">
				<attribute name="PositionPin" value="4"></attribute>
			</variables>
			<variables name="dt1" typeName="UDINT">
				<attribute name="PositionPin" value="5"></attribute>
			</variables>
			<variables name="ACTBUF" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="6"></attribute>
			</variables>
			<variables name="PLCCFG" typeName="PLC_CFG">
				<attribute name="PositionPin" value="7"></attribute>
			</variables>
		</inOutParameters>
		<FBProgram name="ACT_POST">
			<STSource>(*  PACFramework SEControlExpertLIB V1.0.0 *)
(*кінцева обробка ВМ перед фцією act_to_XXX: оновлення загальних статусних бітів PLC, 
обмеження лічильників тривог, запис в STA, ALM, оновлення буферу*)
(*режими - в PLC*)
(*загальний біт хоча б одного ручного*)
IF STA.STA_DISP THEN
    PLCCFG.STA_DISP := true;
END_IF; 
IF STA.STA_SML THEN
    PLCCFG.STA_SML := true;
END_IF;
IF ACTCFG.CNTALM &gt; 30000 THEN
    ACTCFG.CNTALM := 30000;
END_IF;
IF ACTCFG.CNTPER &gt; 30000 THEN
    ACTCFG.CNTPER := 30000;
END_IF;
ACTCFG.STA := STA;
ACTCFG.ALM := ALMs;
(*обнулення усіх команд з HMI*)
ACTCFG.CMDHMI := 0;
(*обнулення усіх команд з програми*)

ACTCFG.CMD.CMD_OPN:=FALSE;
ACTCFG.CMD.CMD_CLS:=FALSE;
ACTCFG.CMD.CMD_TOGGLE:=FALSE;
ACTCFG.CMD.CMD_ALMACK:=FALSE;
ACTCFG.CMD.CMD_ALMRESET:=FALSE;
ACTCFG.CMD.CMD_BLCK:=FALSE;
ACTCFG.CMD.CMD_DBLCK:=FALSE;
ACTCFG.CMD.CMD_STOPTUN:=FALSE;
ACTCFG.CMD.CMD_TUNING:=FALSE;
ACTCFG.CMD.CMD_MAN:=FALSE;
ACTCFG.CMD.CMD_AUTO:=FALSE;
ACTCFG.CMD.CMD_PROTECT:=FALSE;
ACTCFG.CMD.CMD_START:=FALSE;
ACTCFG.CMD.CMD_STOP:=FALSE;
ACTCFG.CMD.CMD_UP:=FALSE;
ACTCFG.CMD.CMD_DWN:=FALSE;
ACTCFG.CMD.CMD_CRMT:=FALSE;
ACTCFG.CMD.CMD_RESOLUTION:=FALSE;
ACTCFG.CMD.CMD_REVERS:=FALSE;
ACTCFG.CMD.CMD_CLCL:=FALSE;
ACTCFG.CMD.CMD_DBLCKACTTOGGLE:=FALSE;
ACTCFG.CMD.CMD_STARTDELAY:=FALSE;
ACTCFG.CMD.CMD_STOPDELAY:=FALSE;
ACTCFG.CMD.CMD_P_RESOLUTION:=FALSE;
ACTCFG.CMD.CMD_BUFLOAD:=FALSE;
ACTCFG.CMD.CMD_OUTSRVC:=FALSE;
ACTCFG.CMD.CMD_INSRVC:=FALSE;
ACTCFG.CMD.CMD_b27:=FALSE;
ACTCFG.CMD.CMD_b28:=FALSE;
ACTCFG.CMD.CMD_b29:=FALSE;
ACTCFG.CMD.CMD_b30:=FALSE;
ACTCFG.CMD.CMD_b31:=FALSE;

CMD.CMD_OPN:=FALSE;
CMD.CMD_CLS:=FALSE;
CMD.CMD_TOGGLE:=FALSE;
CMD.CMD_ALMACK:=FALSE;
CMD.CMD_ALMRESET:=FALSE;
CMD.CMD_BLCK:=FALSE;
CMD.CMD_DBLCK:=FALSE;
CMD.CMD_STOPTUN:=FALSE;
CMD.CMD_TUNING:=FALSE;
CMD.CMD_MAN:=FALSE;
CMD.CMD_AUTO:=FALSE;
CMD.CMD_PROTECT:=FALSE;
CMD.CMD_START:=FALSE;
CMD.CMD_STOP:=FALSE;
CMD.CMD_UP:=FALSE;
CMD.CMD_DWN:=FALSE;
CMD.CMD_CRMT:=FALSE;
CMD.CMD_RESOLUTION:=FALSE;
CMD.CMD_REVERS:=FALSE;
CMD.CMD_CLCL:=FALSE;
CMD.CMD_DBLCKACTTOGGLE:=FALSE;
CMD.CMD_STARTDELAY:=FALSE;
CMD.CMD_STOPDELAY:=FALSE;
CMD.CMD_P_RESOLUTION:=FALSE;
CMD.CMD_BUFLOAD:=FALSE;
CMD.CMD_OUTSRVC:=FALSE;
CMD.CMD_INSRVC:=FALSE;
CMD.CMD_b27:=FALSE;
CMD.CMD_b28:=FALSE;
CMD.CMD_b29:=FALSE;
CMD.CMD_b30:=FALSE;
CMD.CMD_b31:=FALSE;

(*sta bits pack*)
ACTCFG.STAHMI1.0:= ACTCFG.STA.STA_IMSTPD;
ACTCFG.STAHMI1.1:= ACTCFG.STA.STA_MANRUNING;
ACTCFG.STAHMI1.2:= ACTCFG.STA.STA_STOPING;
ACTCFG.STAHMI1.3:= ACTCFG.STA.STA_OPNING;
ACTCFG.STAHMI1.4:= ACTCFG.STA.STA_CLSING;
ACTCFG.STAHMI1.5:= ACTCFG.STA.STA_OPND;
ACTCFG.STAHMI1.6:= ACTCFG.STA.STA_CLSD;
ACTCFG.STAHMI1.7:= ACTCFG.STA.STA_MANBXOUT;
ACTCFG.STAHMI1.8:= ACTCFG.STA.STA_WRKED;
ACTCFG.STAHMI1.9:= ACTCFG.STA.STA_DISP;
ACTCFG.STAHMI1.10:= ACTCFG.STA.STA_MANBX;
ACTCFG.STAHMI1.11:= ACTCFG.STA.STA_INBUF;
ACTCFG.STAHMI1.12:= ACTCFG.STA.STA_FRC;
ACTCFG.STAHMI1.13:= ACTCFG.STA.STA_SML;
ACTCFG.STAHMI1.14:= ACTCFG.STA.STA_BLCK;
ACTCFG.STAHMI1.15:= ACTCFG.STA.STA_STRTING;
ACTCFG.STAHMI2.0:= ACTCFG.STA.STA_STOPED;
ACTCFG.STAHMI2.1:= ACTCFG.STA.STA_SLNDBRK;
ACTCFG.STAHMI2.2:= ACTCFG.STA.STA_CMDACK;
ACTCFG.STAHMI2.3:= ACTCFG.STA.STA_SPD1;
ACTCFG.STAHMI2.4:= ACTCFG.STA.STA_SPD2;
ACTCFG.STAHMI2.5:= ACTCFG.STA.STA_WRNSPD2;
ACTCFG.STAHMI2.6:= ACTCFG.STA.STA_STRT_DELAY;
ACTCFG.STAHMI2.7:= ACTCFG.STA.STA_STOP_DELAY;
ACTCFG.STAHMI2.8:= ACTCFG.STA.STA_DBLCKACT;
ACTCFG.STAHMI2.9:= ACTCFG.STA.STA_ISREVERS;
ACTCFG.STAHMI2.10:= ACTCFG.STA.STA_ISANALOG;
ACTCFG.STAHMI2.11:= ACTCFG.STA.STA_INIOTBUF;
ACTCFG.STAHMI2.12:= ACTCFG.STA.STA_SPDMONON;
ACTCFG.STAHMI2.13:= ACTCFG.STA.STA_SPDCALIBRON;
ACTCFG.STAHMI2.14:= ACTCFG.STA.STA_MAINT;
ACTCFG.STAHMI2.15:= ACTCFG.STA.STA_b31;

(*alm bits pack*)
ACTCFG.ALMHMI1.0:= ACTCFG.ALM.ALM_ALMSTRT;
ACTCFG.ALMHMI1.1:= ACTCFG.ALM.ALM_ALMSTP;
ACTCFG.ALMHMI1.2:= ACTCFG.ALM.ALM_ALMOPN;
ACTCFG.ALMHMI1.3:= ACTCFG.ALM.ALM_ALMCLS;
ACTCFG.ALMHMI1.4:= ACTCFG.ALM.ALM_ALMOPN2;
ACTCFG.ALMHMI1.5:= ACTCFG.ALM.ALM_ALMCLS2;
ACTCFG.ALMHMI1.6:= ACTCFG.ALM.ALM_ALMSHFT;
ACTCFG.ALMHMI1.7:= ACTCFG.ALM.ALM_ALM;
ACTCFG.ALMHMI1.8:= ACTCFG.ALM.ALM_ALMBELL;
ACTCFG.ALMHMI1.9:= ACTCFG.ALM.ALM_WRN;
ACTCFG.ALMHMI1.10:= ACTCFG.ALM.ALM_WRNSPD;
ACTCFG.ALMHMI1.11:= ACTCFG.ALM.ALM_ALMSPD;
ACTCFG.ALMHMI1.12:= ACTCFG.ALM.ALM_WRNSPD2;
ACTCFG.ALMHMI1.13:= ACTCFG.ALM.ALM_ALMSPD2;
ACTCFG.ALMHMI1.14:= ACTCFG.ALM.ALM_ALMPWR;
ACTCFG.ALMHMI1.15:= ACTCFG.ALM.ALM_ALMSTPBTN;
ACTCFG.ALMHMI2.0:=ACTCFG.ALM.ALM_ALMINVRTR;
ACTCFG.ALMHMI2.1:=ACTCFG.ALM.ALM_b17;
ACTCFG.ALMHMI2.2:=ACTCFG.ALM.ALM_b18;
ACTCFG.ALMHMI2.3:=ACTCFG.ALM.ALM_b19;
ACTCFG.ALMHMI2.4:=ACTCFG.ALM.ALM_b20;
ACTCFG.ALMHMI2.5:=ACTCFG.ALM.ALM_b21;
ACTCFG.ALMHMI2.6:=ACTCFG.ALM.ALM_b22;
ACTCFG.ALMHMI2.7:=ACTCFG.ALM.ALM_b23;
ACTCFG.ALMHMI2.8:=ACTCFG.ALM.ALM_b24;
ACTCFG.ALMHMI2.9:=ACTCFG.ALM.ALM_b25;
ACTCFG.ALMHMI2.10:=ACTCFG.ALM.ALM_b26;
ACTCFG.ALMHMI2.11:=ACTCFG.ALM.ALM_b27;
ACTCFG.ALMHMI2.12:=ACTCFG.ALM.ALM_b28;
ACTCFG.ALMHMI2.13:=ACTCFG.ALM.ALM_b29;
ACTCFG.ALMHMI2.14:=ACTCFG.ALM.ALM_b30;
ACTCFG.ALMHMI2.15:=ACTCFG.ALM.ALM_b31;


(*оновлення в буфері HMI
//передаємо постійно в буфер тільки ті значення які змінюються постійно*) 
IF STA.STA_INBUF THEN
    ACTBUF.ID := ACTCFG.ID ;
    ACTBUF.CLSID := ACTCFG.CLSID ;
    ACTBUF.CMDHMI := ACTCFG.CMDHMI ;
    ACTBUF.STAHMI1:= ACTCFG.STAHMI1;
    ACTBUF.ALMHMI1:= ACTCFG.ALMHMI1 ;
    ACTBUF.STAHMI2:= ACTCFG.STAHMI2;
    ACTBUF.ALMHMI2:= ACTCFG.ALMHMI2 ;
    ACTBUF.STEP1:= ACTCFG.STEP1 ;
    ACTBUF.T_STEP1:= ACTCFG.T_STEP1;
    ACTBUF.POS := ACTCFG.POS;
    IF NOT STA.STA_DISP THEN
      ACTBUF.CPOS := ACTCFG.CPOS;
    END_IF;
    (*"BUF".ACTBUF.POS_PV :=   #ACTCFG.POS_PV ;*)
    (*"BUF".ACTBUF.POS_SP :=   #ACTCFG.POS_SP ;*)
    ACTBUF.STA:=ACTCFG.STA;
    ACTBUF.ALM:=ACTCFG.ALM;
    ACTBUF.CNTPER:=ACTCFG.CNTPER;
    ACTBUF.CNTALM:=ACTCFG.CNTALM;
END_IF;

(*онвлення в буфері IoT CFG - пишемо весь конфіг
IF #ACTCFG.ID = "IOTDB".IOTBUF.ACT.ID THEN
    "IOTDB".IOTBUF.ACT := #ACTCFG;
END_IF; 
//онвлення в буфері IoT HMI з CFG - пишемо весь конфіг
IF #ACTCFG.ID = "IOTDB".IOTBUF.ACTH_ID THEN
    "IOTDB".IOTBUF.ACTH := #ACTCFG;
END_IF;  

//запис інформації в контурі, якщо він привязаний
"RW_LOOP_SEL"(direct:='w', ACT:=#ACTCFG);
*)

ACTCFG.T_PREV := PLCCFG.TQMS;
ACTCFG.T_STEP1 := ACTCFG.T_STEP1 + dt1;
IF ACTCFG.T_STEP1 &gt; 16#7FFF_FFFF THEN
    ACTCFG.T_STEP1 := 16#7FFF_FFFF;
END_IF;


</STSource>
		</FBProgram>
	</FBSource>
	<FBSource nameOfFBType="ACT_to_DRV" version="0.09" dateTime="dt#2022-07-16-19:36:14">
		<attribute name="TypeCodeCheckSumString" value="13DC"></attribute>
		<attribute name="TypeSignatureCheckSumString" value="0EDF"></attribute>
		<inOutParameters>
			<variables name="DRVCFG" typeName="DRV_CFG">
				<attribute name="PositionPin" value="1"></attribute>
			</variables>
			<variables name="DRVHMI" typeName="DRV_HMI">
				<attribute name="PositionPin" value="2"></attribute>
			</variables>
			<variables name="ACTCFG" typeName="ACTTR_CFG">
				<attribute name="PositionPin" value="3"></attribute>
			</variables>
		</inOutParameters>
		<FBProgram name="ACT_to_DRV">
			<STSource>(*  PACFramework SEControlExpertLIB V1.0.0 *)
DRVCFG.ID:= ACTCFG.ID;
DRVCFG.CLSID:= ACTCFG.CLSID;
DRVCFG.CMD:= ACTCFG.CMD;
DRVCFG.PRM:= ACTCFG.PRM;
DRVCFG.T_DEASP:= ACTCFG.T_DEASP;
DRVCFG.SPD:= ACTCFG.POS;
DRVCFG.CSPD:= ACTCFG.CPOS;
DRVCFG.STEP1:= ACTCFG.STEP1;
DRVCFG.CNTPER:= ACTCFG.CNTPER;
DRVCFG.CNTALM:= ACTCFG.CNTALM;
DRVCFG.T_STEP1:= ACTCFG.T_STEP1;
DRVCFG.T_PREV:= ACTCFG.T_PREV;
DRVCFG.TQ_TOTAL:= ACTCFG.TQ_TOTAL;
DRVCFG.TQ_LAST:= ACTCFG.TQ_LAST;

DRVCFG.STA_b0 :=  false;
DRVCFG.STA_b1 :=  false;
DRVCFG.STA_MAINT :=  ACTCFG.STA.STA_MAINT;
DRVCFG.STA_STOPING := ACTCFG.STA.STA_STOPING;
DRVCFG.STA_STRTING := ACTCFG.STA.STA_STRTING;
DRVCFG.STA_STOPED:=   ACTCFG.STA.STA_STOPED;
DRVCFG.STA_ISANALOG:= ACTCFG.STA.STA_ISANALOG;
DRVCFG.STA_ISREVERS :=  ACTCFG.STA.STA_ISREVERS;
DRVCFG.STA_WRKED:=    ACTCFG.STA.STA_WRKED;
DRVCFG.STA_DISP:=     ACTCFG.STA.STA_DISP;
DRVCFG.STA_MANBX:=    ACTCFG.STA.STA_MANBX;
DRVCFG.STA_INIOTBUF:= ACTCFG.STA.STA_INIOTBUF;
DRVCFG.STA_INBUF:=    ACTCFG.STA.STA_INBUF;
DRVCFG.STA_FRC:=      ACTCFG.STA.STA_FRC;
DRVCFG.STA_SML:=      ACTCFG.STA.STA_SML;
DRVCFG.STA_BLCK:=     ACTCFG.STA.STA_BLCK;

DRVCFG.ALM_ALMSTRT   := ACTCFG.ALM.ALM_ALMSTRT;
DRVCFG.ALM_ALMSTP    := ACTCFG.ALM.ALM_ALMSTP ;
DRVCFG.ALM_ALMSHFT   := ACTCFG.ALM.ALM_ALMSHFT ;
DRVCFG.ALM_ALMINVRTR := ACTCFG.ALM.ALM_ALMBELL;
DRVCFG.ALM_ALMPWR    := ACTCFG.ALM.ALM_ALMPWR;
DRVCFG.ALM_ALM       := ACTCFG.ALM.ALM_ALM;
DRVCFG.ALM_WRN       := ACTCFG.ALM.ALM_WRN;
DRVCFG.ALM_ALMBELL   := ACTCFG.ALM.ALM_ALMBELL;

DRVHMI.CMD:=ACTCFG.CMDHMI;

DRVHMI.STA.0  :=DRVCFG.STA_b0;
DRVHMI.STA.1  :=DRVCFG.STA_b1;
DRVHMI.STA.2  :=DRVCFG.STA_MAINT;
DRVHMI.STA.3  :=DRVCFG.STA_STOPING;
DRVHMI.STA.4  :=DRVCFG.STA_STRTING;
DRVHMI.STA.5  :=DRVCFG.STA_STOPED;
DRVHMI.STA.6  :=DRVCFG.STA_ISANALOG;
DRVHMI.STA.7  :=DRVCFG.STA_ISREVERS;
DRVHMI.STA.8  :=DRVCFG.STA_WRKED;
DRVHMI.STA.9  :=DRVCFG.STA_DISP;
DRVHMI.STA.10 :=DRVCFG.STA_MANBX;
DRVHMI.STA.11 :=DRVCFG.STA_INIOTBUF;
DRVHMI.STA.12 :=DRVCFG.STA_INBUF;
DRVHMI.STA.13 :=DRVCFG.STA_FRC;
DRVHMI.STA.14 :=DRVCFG.STA_SML;
DRVHMI.STA.15 :=DRVCFG.STA_BLCK;

DRVHMI.ALM.0  :=DRVCFG.ALM_ALMSTRT;
DRVHMI.ALM.1  :=DRVCFG.ALM_ALMSTP;
DRVHMI.ALM.2  :=DRVCFG.ALM_ALMSHFT;
DRVHMI.ALM.3  :=DRVCFG.ALM_ALMINVRTR;
DRVHMI.ALM.4  :=DRVCFG.ALM_ALMPWR;
DRVHMI.ALM.5  :=DRVCFG.ALM_b5;
DRVHMI.ALM.6  :=DRVCFG.ALM_ALM;
DRVHMI.ALM.7  :=DRVCFG.ALM_WRN;
DRVHMI.ALM.8  :=DRVCFG.ALM_ALMBELL;
DRVHMI.ALM.9  :=DRVCFG.ALM_b9;
DRVHMI.ALM.10 :=DRVCFG.ALM_b10;
DRVHMI.ALM.11 :=DRVCFG.ALM_b11;
DRVHMI.ALM.12 :=DRVCFG.ALM_b12;
DRVHMI.ALM.13 :=DRVCFG.ALM_b13;
DRVHMI.ALM.14 :=DRVCFG.ALM_b14;
DRVHMI.ALM.15 :=DRVCFG.ALM_b15;


DRVHMI.SPD := REAL_TO_INT(DRVCFG.SPD)*100;

</STSource>
		</FBProgram>
	</FBSource>
</FBExchangeFile>
