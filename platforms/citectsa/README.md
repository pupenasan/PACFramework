# Розгортання PACFramework у проекті Citect Situational Awareness

Побажання та пропозиції для даного матеріалу можна робити за [цим посиланням](https://github.com/pupenasan/PACFramework/issues/59)

## Загальні принципи адаптації

PACFramework призначений перш за все для розробки прикладного ПЗ для ПЛК. Тим не менше багато сучасних SCADA програм передбачають нові підходи до побудови високоефективних людино-машинних інтерфейсів, які у свою чергу потребують підтримки з боку ПЛК. Серед таких - Aveva Plant SCADA (раніше Citect) Situational Awareness. Це новий шаблон в новій версії SCADA Citect і формально в новій SCADA з іншою назвою. Надалі в цьому описі він буде називатися `Citect SA`, щоб показати спорідненість з Citect.

Окрім нових підходів Citect SA базується на бібліотеці композитних джинів, які відповідають за різні типи об'єктів - вимірювальних приладів, виконавчих механізмів і т.п. Кількість таких об'єктів досить велика і вони у свою чергу спираються на відповідні шаблони Equipment (обладнання, устатковання). Це повністю відповідає концепції PACFramework, де кожен об'єкт каркасу є також устаткованням. По факту ці Equipment відповідають аналогічним з рівня LVL1 (тльки AIVAR) та LVL2 (пристрої). Відповідність не є прямою, але за рахунок гнучкості PACFramework можна привести  PACFramework до Citect SA та навпаки. У PACFramework треба реалізувати додаткову функцію на рівні ПЛК (детальніше в описі нижче) а в Citect SA трохи змінити шаблони Equipment. При цьому бібліотечні композитні джини можна взагалі не змінювати, їх функціональність підтримується повністю на рівні шаблону.

Додатково можна змінити кольорову палітру в ряді композитних джинів. Для цього є відповідні композитні джини з суфіксом PFW (поки не реалізовано). Це зумовлено особливістю вибраної кольорової палітри в Citect SA (темний - активний, світлий - пасивний).                     

- [Загальні властивості та налаштування Citect SA](cm_common.md)
- [Адаптація Meters до AI_VAR](cm_aivar.md)
- [Адаптація приводних об'єктів](cm_drive.md)
- [Адаптація клапанів](cm_valve.md)

## Опис шаблонного проекту для адаптації

Розробка проекту SA з PACFramework проводиться шляхом попереднього включення в проект шаблонного проекту  `SA_LibraryPFW`, який містить необхідні бібліотечні елементи та скрипти.

### Перелік типів Equipment

- DIVAR_HMI - відповідно до DIVAR_HMI ПЛК

- AIVAR_HMI - відповідно до AIVAR_HMI ПЛК

- DOVAR_HMI - відповідно до DOVAR_HMI ПЛК

- AOVAR_HMI - відповідно до AOVAR_HMI ПЛК

- PARASHMI - спеціальна змінна для фонового обміну конфігураційними параметрами

- VARBUF - відповідно до VARBUF ПЛК

- CH_BUF - відповідно до CH_BUF ПЛК

- MODULE - відповідно до MODULE ПЛК

- PLC - відповідно до PLC ПЛК

- SUBMODULE - відповідно SUBMODULE ПЛК


### Перелік функцій

Усі базові функції PACFramework розміщені у файлі `PFW_base.ci`

## Приклади розгортання PACFramework

Нижче наведено кілька варіантів прикладів розгортання PACFramework Citect SA, Unity PRO (Modbus TCP)

1) [Приклад](deployex1.md) розгортання демо-проекту без утиліт автоматизації. 
2) [Приклад](deployex2.md) розгортання демо-проекту з імітатором з використанням PACFramework tools. 

## Готовий розгорнутий проект

Останню версію готового розгорнутого проекту можна завантажити за наступними посиланнями:

- [ручне розгортання](https://drive.google.com/file/d/1p1hVDR9h16FE8UocH81PuxELDA3lUs9N/view?usp=sharing) PLANT SCADA 2020 R2
- автоматичне розгортання (PACFramework Tools) PLANT SCADA 2020 R2
- [демо проект Unity PRO](https://github.com/pupenasan/PACFramework/blob/master/platforms/unitypro/pacexample.xef)
