<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="Machine Expert Logic Builder" productVersion="V21.0.22.0" creationDateTime="2024-02-07T15:48:44.9672837" />
  <contentHeader name="PacFramwork" version="0.0.0.0" modificationDateTime="2021-04-29T23:02:57.5377485" author="roma_mirkevich">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation>
          <property name="Author" type="string">roma_mirkevich</property>
          <property name="Company" type="string" />
          <property name="Description" type="string" />
          <property name="Project" type="string">PacFramwork</property>
          <property name="Title" type="string">PacFramwork</property>
          <property name="Version" type="version">0.0.0.0</property>
        </ProjectInformation>
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes>
      <dataType name="PLC_STA">
        <baseType>
          <struct>
            <variable name="CON2ERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є помилка звязку з сусідні ПЛК в парі (для теплого резерування)</xhtml>
              </documentation>
            </variable>
            <variable name="PLC2STOP">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - спарений ПЛК в стопі (для теплого резерування)</xhtml>
              </documentation>
            </variable>
            <variable name="BLK">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – є хоча б один заблокований ВМ</xhtml>
              </documentation>
            </variable>
            <variable name="ALDIS">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – є хоча б одна відключена тривога</xhtml>
              </documentation>
            </variable>
            <variable name="DIOON">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - йде опитування по мережі (MODBUS або аналогічній) засобів віддаленого вводу/виводу</xhtml>
              </documentation>
            </variable>
            <variable name="DIOERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є помилка на DIO</xhtml>
              </documentation>
            </variable>
            <variable name="b6">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="FRC">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – хоча б одна змінна форсована на будь якому рівні</xhtml>
              </documentation>
            </variable>
            <variable name="SMLALL">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – все в режимі в імітації, примушує усі CM перейти в режим імітації</xhtml>
              </documentation>
            </variable>
            <variable name="DISP">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – хоча б один елемент в режимі ручного управління</xhtml>
              </documentation>
            </variable>
            <variable name="FRC2">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – є хоча б один форсований керівний елемент (рівня 2), клапан, двигун</xhtml>
              </documentation>
            </variable>
            <variable name="FRC1">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – хоча б одна змінна форсована (рівня 1)</xhtml>
              </documentation>
            </variable>
            <variable name="SCN1">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – перший скан</xhtml>
              </documentation>
            </variable>
            <variable name="FRC0">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – хоча б одна змінна форсована (рівня 0)</xhtml>
              </documentation>
            </variable>
            <variable name="SML">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – хоча б один об’єкт в режимі імітації</xhtml>
              </documentation>
            </variable>
            <variable name="CMDACK">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - підтвердження команди, команда пройшла через весь цикл задачі і отримана усіма	</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>df179806-e446-41e9-8a3d-062c239f12fa</ObjectId>
          </data>
        </addData>
      </dataType>
      <dataType name="PLC_ALM1">
        <baseType>
          <struct>
            <variable name="ALM">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є активна тривога</xhtml>
              </documentation>
            </variable>
            <variable name="NWALM">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є нова тривога </xhtml>
              </documentation>
            </variable>
            <variable name="ALMNACK">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - біт підтвердження тривоги </xhtml>
              </documentation>
            </variable>
            <variable name="WRN">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є активне попередження</xhtml>
              </documentation>
            </variable>
            <variable name="NWWRN">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є нове попередження </xhtml>
              </documentation>
            </variable>
            <variable name="WRNNACK">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - біт підтвердження попередження </xhtml>
              </documentation>
            </variable>
            <variable name="BAD">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є активна тривога недостовірності даних</xhtml>
              </documentation>
            </variable>
            <variable name="NWBAD">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є нова тривога недостовірності даних </xhtml>
              </documentation>
            </variable>
            <variable name="BADNACK">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - біт підтвердження тривоги недостовірності даних </xhtml>
              </documentation>
            </variable>
            <variable name="EMCYSTP">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1, аварійний зупин (грибок)</xhtml>
              </documentation>
            </variable>
            <variable name="STP2RUN">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1, момент переходу з аварійного зупину в роботу</xhtml>
              </documentation>
            </variable>
            <variable name="CON2ERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є помилка звязку з сусідні ПЛК в парі (для теплого резерування)</xhtml>
              </documentation>
            </variable>
            <variable name="PLC2STOP">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - спарений ПЛК в стопі (для теплого резерування)</xhtml>
              </documentation>
            </variable>
            <variable name="DIOERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 - є помилка DIO</xhtml>
              </documentation>
            </variable>
            <variable name="PLCERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – є апаратна помилка (ПЛК)</xhtml>
              </documentation>
            </variable>
            <variable name="CONHIERR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 – єпомилка звязку з верхнім рівнем</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>39678909-3ee6-4f47-bd99-d18aafcaca23</ObjectId>
          </data>
        </addData>
      </dataType>
      <dataType name="PLS">
        <baseType>
          <struct>
            <variable name="P100MS">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 100 мс</xhtml>
              </documentation>
            </variable>
            <variable name="P200MS">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 200 мс</xhtml>
              </documentation>
            </variable>
            <variable name="P500MS">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 500 мс</xhtml>
              </documentation>
            </variable>
            <variable name="P1S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 1 с</xhtml>
              </documentation>
            </variable>
            <variable name="P2S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 2 с</xhtml>
              </documentation>
            </variable>
            <variable name="P5S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 5 с</xhtml>
              </documentation>
            </variable>
            <variable name="P10S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 10 с</xhtml>
              </documentation>
            </variable>
            <variable name="P60S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 1 хв</xhtml>
              </documentation>
            </variable>
            <variable name="M1S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> меандр з періодом 1 с (0.5 с + 0.5 с)</xhtml>
              </documentation>
            </variable>
            <variable name="M2S">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> меандр з періодом 2 с (1 с + 1 с)</xhtml>
              </documentation>
            </variable>
            <variable name="b10">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="b11">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="NEWMIN">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 (на один цикл основної задачі) – початок хвилини</xhtml>
              </documentation>
            </variable>
            <variable name="NEWHR">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 (на один цикл основної задачі) – початок години</xhtml>
              </documentation>
            </variable>
            <variable name="NEWDAY">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 (на один цикл основної задачі) – початок доби</xhtml>
              </documentation>
            </variable>
            <variable name="NEWSHIFT">
              <type>
                <BOOL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> =1 (на один цикл основної задачі) – початок зміни</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>3d2b5e34-a06e-456b-899a-8b21fbbd4dab</ObjectId>
          </data>
        </addData>
      </dataType>
      <dataType name="PLC_CFG">
        <baseType>
          <struct>
            <variable name="ID">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Унікальний ідентифікатор</xhtml>
              </documentation>
            </variable>
            <variable name="CLSID">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> 1621xx</xhtml>
              </documentation>
            </variable>
            <variable name="STA">
              <type>
                <derived name="PLC_STA" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> набір біт типу PLC_STA</xhtml>
              </documentation>
            </variable>
            <variable name="CMD">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Команди з HMI</xhtml>
              </documentation>
            </variable>
            <variable name="CMDPRG">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Команди з програмного керування (побітові)</xhtml>
              </documentation>
            </variable>
            <variable name="PRM1">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> дискретні параметри</xhtml>
              </documentation>
            </variable>
            <variable name="PRM2">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> дискретні параметри</xhtml>
              </documentation>
            </variable>
            <variable name="PLS">
              <type>
                <derived name="PLS" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> бітові міандри</xhtml>
              </documentation>
            </variable>
            <variable name="ALM1">
              <type>
                <derived name="PLC_ALM1" />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> біти алармів</xhtml>
              </documentation>
            </variable>
            <variable name="ALM2">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> біти алармів</xhtml>
              </documentation>
            </variable>
            <variable name="STEP1">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> крок основної програми</xhtml>
              </documentation>
            </variable>
            <variable name="T_STEP1">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> час кроку основної програми обробки, в (с)</xhtml>
              </documentation>
            </variable>
            <variable name="MSG">
              <type>
                <UDINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> для формування повідомлень, може бути як бітовим (32 повідомлення), так і числовим (за номером); передбачається, що повідомлення буде скидуватися в 0 автоматично через певний час (не менш ніж 2 інтервали опитування з HMI)</xhtml>
              </documentation>
            </variable>
            <variable name="TQ">
              <type>
                <UDINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> загальний час з початку 1-го циклу контролера (в секундах)</xhtml>
              </documentation>
            </variable>
            <variable name="TQM">
              <type>
                <UDINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> загальний час роботи ПЛК з моменту пуску (в хвилинах)</xhtml>
              </documentation>
            </variable>
            <variable name="DICNT">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> кількість наявних каналів DI</xhtml>
              </documentation>
            </variable>
            <variable name="DOCNT">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> кількість наявних каналів DO</xhtml>
              </documentation>
            </variable>
            <variable name="AICNT">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> кількість наявних каналів AI</xhtml>
              </documentation>
            </variable>
            <variable name="AOCNT">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> кількість наявних каналів AO</xhtml>
              </documentation>
            </variable>
            <variable name="NOW">
              <type>
                <array>
                  <dimension lower="0" upper="3" />
                  <baseType>
                    <INT />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> плинний час астрономічний час в BCD форматі: NOW[0] seconds,-- (16ss,--)  NOW[1] hour, minute (16hhmm)  NOW[2] month, day (16mmdd)  NOW[3] year (16yyyy)</xhtml>
              </documentation>
            </variable>
            <variable name="SHIFTPARA">
              <type>
                <array>
                  <dimension lower="0" upper="3" />
                  <baseType>
                    <INT />
                  </baseType>
                </array>
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> Години передачі змін (максимум 3 зміни): SHIFT[0] – кількість змін SHIFT[1] – передача 1-ї зміни (BCD 16hhmm) SHIFT[2] – передача 2-ї зміни (BCD 16hhmm)  SHIFT[3] – передача 3-ї зміни (BCD 16hhmm)</xhtml>
              </documentation>
            </variable>
            <variable name="SHIFTNMB">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> номер активної зміни</xhtml>
              </documentation>
            </variable>
            <variable name="CNTALM">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількості активних тривог аварія</xhtml>
              </documentation>
            </variable>
            <variable name="CNTWRN">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіактивних тривог попередження</xhtml>
              </documentation>
            </variable>
            <variable name="CNTBAD">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіактивних тривог недостовірність</xhtml>
              </documentation>
            </variable>
            <variable name="CNTFRC">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіфорсованих об'єктів</xhtml>
              </documentation>
            </variable>
            <variable name="CNTMAN">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількості ВМ в ручному режимі</xhtml>
              </documentation>
            </variable>
            <variable name="TSK_LTIME">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> плинний (останній) час задачі в мілісекундах</xhtml>
              </documentation>
            </variable>
            <variable name="TSK_MAXTIME">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> максимальний час задачі в мілісекундах</xhtml>
              </documentation>
            </variable>
            <variable name="STA_PERM">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> повторює STA, який був на початку виклику функції</xhtml>
              </documentation>
            </variable>
            <variable name="ALM1_PERM">
              <type>
                <UINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> повторює ALM1, який був на початку виклику функції</xhtml>
              </documentation>
            </variable>
            <variable name="CNTALM_PERM">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількості активних тривог аварія</xhtml>
              </documentation>
            </variable>
            <variable name="CNTWRN_PERM">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіактивних тривог попередження</xhtml>
              </documentation>
            </variable>
            <variable name="CNTBAD_PERM">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіактивних тривог недостовірність</xhtml>
              </documentation>
            </variable>
            <variable name="CNTFRC_PERM">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількостіфорсованих об'єктів</xhtml>
              </documentation>
            </variable>
            <variable name="CNTMAN_PERM">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="0" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> лічильник кількості ВМ в ручному режимі</xhtml>
              </documentation>
            </variable>
            <variable name="MODULSCNT">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> кількість модулів</xhtml>
              </documentation>
            </variable>
            <variable name="NOWns">
              <type>
                <UDINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> нс (наносекунди) для плинного астрономічного часу </xhtml>
              </documentation>
            </variable>
            <variable name="TQMS">
              <type>
                <UDINT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> мілісекундний лічильник, скидається при старті або після переповнення </xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>bce2598d-7501-44fa-a5b1-8ddbe996d692</ObjectId>
          </data>
        </addData>
      </dataType>
    </dataTypes>
    <pous>
      <pou name="PLCFN" pouType="functionBlock">
        <interface>
          <inOutVars>
            <variable name="PLC">
              <type>
                <derived name="PLC_CFG" />
              </type>
            </variable>
          </inOutVars>
          <globalVars>
            <variable name="TMBITS_PREV">
              <type>
                <INT />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> попереднє значення таймерних меандрів</xhtml>
              </documentation>
            </variable>
            <variable name="MEM_RT">
              <type>
                <LREAL />
              </type>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> память для вимірювання часу циклу</xhtml>
              </documentation>
            </variable>
            <variable name="FirstScan">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="NextScan">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Clock_10Hz">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Clock_5Hz">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Clock_2Hz">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Clock_1Hz">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="Clock_0_5Hz">
              <type>
                <BOOL />
              </type>
            </variable>
            <variable name="BLINK_10Hz">
              <type>
                <derived name="BLINK" />
              </type>
            </variable>
            <variable name="BLINK_5Hz">
              <type>
                <derived name="BLINK" />
              </type>
            </variable>
            <variable name="BLINK_2Hz">
              <type>
                <derived name="BLINK" />
              </type>
            </variable>
            <variable name="BLINK_1Hz">
              <type>
                <derived name="BLINK" />
              </type>
            </variable>
            <variable name="BLINK_0_5Hz">
              <type>
                <derived name="BLINK" />
              </type>
            </variable>
            <variable name="iecResult">
              <type>
                <derived name="RTS_IEC_RESULT" />
              </type>
            </variable>
            <variable name="pIecInfo">
              <type>
                <pointer>
                  <baseType>
                    <derived name="CmpIecTask.Task_Info2" />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="LocalTime_ofset">
              <type>
                <INT />
              </type>
              <initialValue>
                <simpleValue value="2" />
              </initialValue>
            </variable>
          </globalVars>
          <tempVars>
            <variable name="TMBITS_CUR">
              <type>
                <INT />
              </type>
            </variable>
            <variable name="i">
              <type>
                <INT />
              </type>
            </variable>
            <variable name="NOW">
              <type>
                <derived name="SYSTIMEDATE" />
              </type>
            </variable>
          </tempVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">	IF PLC.STA.CMDACK THEN
	    PLC.CMD := 0;
	END_IF;
	PLC.STA.CMDACK := (PLC.CMD &lt;&gt; 0 AND NOT PLC.STA.CMDACK);
	
	(*--------------------------------- Визначення біту першого скану*)
	
	IF NOT FirstScan AND NOT NextScan THEN
		FirstScan := TRUE;
		NextScan:=TRUE;
	ELSE
		FirstScan := FALSE;
	END_IF


	
	PLC.STA.SCN1 := FirstScan;
	IF PLC.STA.SCN1 THEN (*при першому скані*)
	    PLC.ID := 1;             (*Ідентифікатор завжди 1*)
	    PLC.CLSID := 16#2100;    (*Клас завжди 162100*)
	    PLC.TQ := 0;
	    TMBITS_CUR := 0;
	    TMBITS_PREV := 0;
		PLC.TQMS := 0;
	END_IF;
	
	PLC.STA_PERM.0 := PLC.STA.CON2ERR;
	PLC.STA_PERM.1 := PLC.STA.PLC2STOP;
	PLC.STA_PERM.2 := PLC.STA.BLK;
	PLC.STA_PERM.3 := PLC.STA.ALDIS;
	PLC.STA_PERM.4 := PLC.STA.DIOON;
	PLC.STA_PERM.5 := PLC.STA.DIOERR;
	PLC.STA_PERM.6 := PLC.STA.b6;
	PLC.STA_PERM.7 := PLC.STA.FRC;
	PLC.STA_PERM.8 := PLC.STA.SMLALL;
	PLC.STA_PERM.9 := PLC.STA.DISP;
	PLC.STA_PERM.10 := PLC.STA.FRC2;
	PLC.STA_PERM.11 := PLC.STA.FRC1;
	PLC.STA_PERM.12 := PLC.STA.SCN1;
	PLC.STA_PERM.13 := PLC.STA.FRC0;
	PLC.STA_PERM.14 := PLC.STA.SML;
	PLC.STA_PERM.15 := PLC.STA.CMDACK;
	
	PLC.ALM1_PERM.0 := PLC.ALM1.ALM;
	PLC.ALM1_PERM.1 := PLC.ALM1.NWALM;
	PLC.ALM1_PERM.2 := PLC.ALM1.ALMNACK;
	PLC.ALM1_PERM.3 := PLC.ALM1.WRN;
	PLC.ALM1_PERM.4 := PLC.ALM1.NWWRN;
	PLC.ALM1_PERM.5 := PLC.ALM1.WRNNACK;
	PLC.ALM1_PERM.6 := PLC.ALM1.BAD;
	PLC.ALM1_PERM.7 := PLC.ALM1.NWBAD;
	PLC.ALM1_PERM.8 := PLC.ALM1.BADNACK;
	PLC.ALM1_PERM.9 := PLC.ALM1.EMCYSTP;
	PLC.ALM1_PERM.10 := PLC.ALM1.STP2RUN;
	PLC.ALM1_PERM.11 := PLC.ALM1.CON2ERR;
	PLC.ALM1_PERM.12 := PLC.ALM1.PLC2STOP;
	PLC.ALM1_PERM.13 := PLC.ALM1.DIOERR;
	PLC.ALM1_PERM.14 := PLC.ALM1.PLCERR;
	PLC.ALM1_PERM.15 := PLC.ALM1.CONHIERR;
	
	
	(*--------------------------------- таймерні біти та лічильники*)
	BLINK_10Hz(enable:=TRUE, timelow:=T#50MS, timehigh:=T#50MS, out=&gt;Clock_10Hz);
	BLINK_5Hz(enable:=TRUE, timelow:=T#100MS, timehigh:=T#100MS, out=&gt;Clock_5Hz);
	BLINK_2Hz(enable:=TRUE, timelow:=T#250MS, timehigh:=T#250MS, out=&gt;Clock_2Hz);
	BLINK_1Hz(enable:=TRUE, timelow:=T#500MS, timehigh:=T#500MS, out=&gt;Clock_1Hz);
	BLINK_0_5Hz(enable:=TRUE, timelow:=T#1000MS, timehigh:=T#1000MS, out=&gt;Clock_0_5Hz);
	
	(*плинні значення*)
	TMBITS_CUR.0 := Clock_10Hz;         // 100MS 
	TMBITS_CUR.1 := Clock_5Hz;        // 200MS
	TMBITS_CUR.2 := Clock_2Hz;        // 500MS
	TMBITS_CUR.3 := Clock_1Hz;      // 1S
	TMBITS_CUR.7 := PLC.NOW[0] &gt; 16#29; //min
	
	(*відловлювання імпульсів необхідних часових періодів*)
	PLC.PLS.P100MS := TMBITS_CUR.0 AND NOT TMBITS_PREV.0; (*100 мс *)
	PLC.PLS.P200MS := TMBITS_CUR.1 AND NOT TMBITS_PREV.1; (*200 мс*)
	PLC.PLS.P500MS := TMBITS_CUR.2 AND NOT TMBITS_PREV.2; (*500 мс*)
	PLC.PLS.P1S := TMBITS_CUR.3 AND NOT TMBITS_PREV.3; (*1 с*)
	PLC.PLS.P60S := TMBITS_CUR.7 AND NOT TMBITS_PREV.7; (*1 хв*)
	(*підрахунок кількості секунд і хвилин*)
	IF PLC.PLS.P1S THEN
	    PLC.TQ := PLC.TQ + 1;
	END_IF;  (*загальний час з початку 1-го циклу контролера (в секундах)*)
	IF PLC.TQ &gt; 16#7FFF_FFFF THEN
	    PLC.TQ := 16#7FFF_FFFF;
	END_IF;
	IF PLC.PLS.P60S AND NOT PLC.STA.SCN1 THEN
	    PLC.TQM := PLC.TQM + 1;
	END_IF; (*загальний час роботи ПЛК з моменту пуску (в хвилинах)*)
	IF PLC.TQM &gt; 16#7FFF_FFFF THEN
	    PLC.TQM := 16#7FFF_FFFF;
	END_IF;
	
	(*розрахунок інших часових періодів*)
	PLC.PLS.P2S := (PLC.TQ MOD 2) = 0 AND PLC.PLS.P1S;(*2 с*)
	PLC.PLS.P5S := (PLC.TQ MOD 5) = 0 AND PLC.PLS.P1S;(*5 с*)
	PLC.PLS.P10S := (PLC.TQ MOD 10) = 0 AND PLC.PLS.P1S;(*10 с*)
	
	(* меандри *)
	PLC.PLS.M1S := Clock_1Hz;  (*меандр з періодом 1 с (0.5 с + 0.5 с)*)
	PLC.PLS.M2S := Clock_0_5Hz;(*меандр з періодом 2 с (1 с + 1 с) *)
	
	(* астрономічний час *)
	SysTimeRtcConvertUtcToDate(dwTimestampUtc:= GetRTC()+LocalTime_ofset*3600, pDate:=NOW );
	PLC.NOW[0] := INT_TO_BCD(NOW.wSECOND); //NOW[0] seconds,-- (16ss,--)
	PLC.NOW[1] := SHL(INT_TO_BCD(NOW.wHOUR), 8) OR INT_TO_BCD(NOW.wMINUTE);//16hhmm
	PLC.NOW[2] := SHL(INT_TO_BCD(NOW.wMONTH), 8) OR INT_TO_BCD(NOW.wDAY);  //16mmdd
	PLC.NOW[3] := SHL(INT_TO_BCD(NOW.wYEAR / 100), 8) OR INT_TO_BCD(NOW.wYEAR MOD 100);; //16yyyy
	PLC.NOWns := INT_TO_BCD(now.wMilliseconds)*1000000;
	(* початок години *)
	PLC.PLS.NEWHR := (PLC.NOW[1] AND 16#00FF) = 0 (*хвилини*)AND PLC.PLS.P60S (*один раз за хвилину*);
	
	(* початок доби*)
	PLC.PLS.NEWDAY := PLC.NOW[1] = 0 (*години_хвилини*)AND PLC.PLS.P60S (*один раз за хвилину*);
	
	(*початок зміни*)
	IF PLC.SHIFTPARA[0] &lt; 1 OR PLC.SHIFTPARA[0] &gt; 3 THEN
	    PLC.SHIFTPARA[0] := 2;
	END_IF;(*коректність кількості змін*)
	PLC.PLS.NEWSHIFT := FALSE; (*скидуємо біт початку зміни*)
	FOR i := 1 TO PLC.SHIFTPARA[0] DO
	    (*хоча б одна з устоавок змін спрацювала*)
	    PLC.PLS.NEWSHIFT := PLC.PLS.NEWSHIFT OR (PLC.SHIFTPARA[i] = PLC.NOW[1] (*години хвилин*)AND PLC.PLS.P60S (*один раз за хвилину*));
	END_FOR;
	
	TMBITS_PREV := TMBITS_CUR;(*збереження попередніх значень*)
	
	(*----------- визначеня зміни*)
	IF PLC.SHIFTPARA[0] &gt; 3 OR PLC.SHIFTPARA[0] &lt; 2 THEN
	    PLC.SHIFTPARA[0] := 3;
	END_IF;(*якщо кількість змін &gt;3 або &lt;1 - робимо 3*)
	IF PLC.NOW[1] &gt;= PLC.SHIFTPARA[1] AND (PLC.NOW[1] &lt; PLC.SHIFTPARA[2] OR PLC.SHIFTPARA[2] = 16#0000) THEN (*1-ша зміна*)
	    PLC.SHIFTNMB := 1;
	ELSE (*2-га або 3-тя*)
	    IF PLC.SHIFTPARA[0] = 2 THEN (*якщо в 2 зміни*)
	        PLC.SHIFTNMB := 2;
	    ELSE (*якщо 3 зміни*)
	        IF PLC.NOW[1] &gt;= PLC.SHIFTPARA[2] AND (PLC.NOW[1] &lt; PLC.SHIFTPARA[3] OR PLC.SHIFTPARA[3] = 16#0000) THEN
	            PLC.SHIFTNMB := 2;
	        ELSE
	            PLC.SHIFTNMB := 3;
	        END_IF;
	    END_IF;
	END_IF;
	(*----------- *)
	
	(*цикли*)
	pIecInfo := IecTaskGetInfo3(hIecTask := IecTaskGetCurrent(pResult := ADR(iecResult)), pResult := ADR(iecResult));
	PLC.TSK_LTIME := DWORD_TO_UINT(pIecInfo^.dwCycleTime / 1000);
	
	
	IF NOT FirstScan THEN
	    //обмеження 
	    IF PLC.TSK_MAXTIME &gt; 3000 THEN
	        PLC.TSK_MAXTIME := 0;
	    END_IF;
	    IF PLC.TSK_MAXTIME &lt; PLC.TSK_LTIME THEN
	        PLC.TSK_MAXTIME := PLC.TSK_LTIME;
	    END_IF;
	ELSE
	    PLC.TSK_MAXTIME := 0;
	END_IF;
	PLC.TQMS := PLC.TQMS + PLC.TSK_LTIME;//лічильник в мс
	
	(*скидання статусів і тривог*)
	PLC.STA.BLK := false;
	PLC.STA.ALDIS := false;
	PLC.STA.FRC := false;
	PLC.STA.SMLALL := false;
	PLC.STA.DISP := false;
	PLC.STA.FRC2 := false;
	PLC.STA.FRC1 := false;
	PLC.STA.FRC0 := false;
	PLC.STA.SML := false;
	
	PLC.ALM1.ALM := 0;
	PLC.ALM1.NWALM := 0;
	PLC.ALM1.ALMNACK := 0;
	PLC.ALM1.WRN := 0;
	PLC.ALM1.NWWRN := 0;
	PLC.ALM1.WRNNACK := 0;
	PLC.ALM1.BAD := 0;
	PLC.ALM1.NWBAD := 0;
	PLC.ALM1.BADNACK := 0;
	PLC.ALM1.EMCYSTP := 0;
	PLC.ALM1.STP2RUN := 0;
	PLC.ALM1.CON2ERR := 0;
	PLC.ALM1.PLC2STOP := 0;
	PLC.ALM1.DIOERR := 0;
	PLC.ALM1.PLCERR := 0;
	PLC.ALM1.CONHIERR := 0;
	
	(*запамятовування лічильників*)
	PLC.CNTALM_PERM := PLC.CNTALM;
	PLC.CNTWRN_PERM := PLC.CNTWRN;
	PLC.CNTBAD_PERM := PLC.CNTBAD;
	PLC.CNTFRC_PERM := PLC.CNTFRC;
	PLC.CNTMAN_PERM := PLC.CNTMAN;
	
	(*скидання лічильників*)
	PLC.CNTALM := 0;
	PLC.CNTWRN := 0;
	PLC.CNTBAD := 0;
	PLC.CNTFRC := 0;
	PLC.CNTMAN := 0;</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>b861213d-4b33-4258-995a-c2d4907c9ef5</ObjectId>
          </data>
        </addData>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Object Name="PLCFN" ObjectId="b861213d-4b33-4258-995a-c2d4907c9ef5" />
        <Folder Name="UTD">
          <Object Name="PLC_STA" ObjectId="df179806-e446-41e9-8a3d-062c239f12fa" />
          <Object Name="PLC_ALM1" ObjectId="39678909-3ee6-4f47-bd99-d18aafcaca23" />
          <Object Name="PLS" ObjectId="3d2b5e34-a06e-456b-899a-8b21fbbd4dab" />
          <Object Name="PLC_CFG" ObjectId="bce2598d-7501-44fa-a5b1-8ddbe996d692" />
        </Folder>
      </ProjectStructure>
    </data>
  </addData>
</project>