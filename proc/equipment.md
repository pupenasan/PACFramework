# Equipment з процедурами

- **PC** - Process Cell
- **UN** - Unit
- **EM** - Equipment Module 

## Структури

### CFG 

EM_CFG, UN_CFG, EM_CFG

| name        | type  | adr  | bit  | descr                                                        |
| ----------- | ----- | ---- | ---- | ------------------------------------------------------------ |
| ID          | UINT  | 0    |      |                                                              |
| SLSID       | UINT  | 1    |      |                                                              |
| STA         | INT   | 2    |      |                                                              |
|             |       |      | 0    |                                                              |
| ISALLOC     |       |      | 1    | обладнання зайняте                                           |
|             |       |      | 2    |                                                              |
|             |       |      | 3    |                                                              |
|             |       |      | 4    |                                                              |
|             |       |      | 5    |                                                              |
|             |       |      | 6    |                                                              |
|             |       |      | 7    |                                                              |
|             |       |      | 8    |                                                              |
|             |       |      | 9    |                                                              |
|             |       |      | 10   |                                                              |
|             |       |      | 11   |                                                              |
|             |       |      | 12   |                                                              |
|             |       |      | 13   |                                                              |
|             |       |      | 14   |                                                              |
|             |       |      | 15   |                                                              |
| CMD         | UINT  | 3    |      |                                                              |
| PRM         |       | 4    |      |                                                              |
|             |       |      |      |                                                              |
|             |       |      |      |                                                              |
| ID_OWNER    | UINT  |      |      | ID об'єкту (Recipy Entyty або Equipment) що займає (Allocation) даний Equipment |
| CLSID_OWNER | UINT  |      |      | CLSID об'єкту (Recipy Entyty або Equipment) що займає (Allocation) даний Equipment |
| BATCH_ID    | UDINT |      |      | ID Batch                                                     |





- ID Owner
- CLSID Owner


​	STEP1: INT; //
​	TSTEP1: INT; //



**Функції**:

- надавати Allocation явно
- надавати доступ до керування процедурам устаткування тільки тим кому треба
- звільняти доступ за наявним запитом
- звільняти доступ за неявним запитом



1) Обмеження на доступ до керування ззовні процедурними елементами покласти на Equipment
2) Для кожного процедурного елементу ввести додаткові структурні змінні:
   - PRC_HLCTRL - для керування та контролю
     - CMD для процедурного елементу, співпадає з HMI
     - ID+CLSID того, хто відправляє команду 
     - PRC_HMI - структура аналогічна HMI (?? або брати існуючу)
   - PRC_HLPRM - для обміну параметрами
3) Equipment буде скоординовувати передачу команд та параметрів на процедурні елементи, якими володіє, перевіряючи чи команда містить ID_OWNER або ID_OWNER відсутній
4) ID_OWNER - може бути ID керівного рецепту або іншого Equipment, що означується CLSID_OWNER
5) Керівний рецепт буде представлений у вигляді HTML
6) HTML буде обмінюватися зі SCADA/HMI або іншими засобами через SQL (MYSQL)
7)  